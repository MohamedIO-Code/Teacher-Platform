(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87316,e=>{"use strict";let a=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>a],87316)},84614,e=>{"use strict";let a=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>a],84614)},7233,e=>{"use strict";let a=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},63059,e=>{"use strict";let a=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>a],63059)},87130,e=>{"use strict";let a=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>a],87130)},25508,e=>{e.v({addButton:"evaluations-module__QgHSaa__addButton",avatar:"evaluations-module__QgHSaa__avatar",cancelBtn:"evaluations-module__QgHSaa__cancelBtn",card:"evaluations-module__QgHSaa__card",cardFooter:"evaluations-module__QgHSaa__cardFooter",cardHeader:"evaluations-module__QgHSaa__cardHeader",closeModal:"evaluations-module__QgHSaa__closeModal",comments:"evaluations-module__QgHSaa__comments",container:"evaluations-module__QgHSaa__container",date:"evaluations-module__QgHSaa__date",empty:"evaluations-module__QgHSaa__empty",evaluator:"evaluations-module__QgHSaa__evaluator",filterGroup:"evaluations-module__QgHSaa__filterGroup",filterSelect:"evaluations-module__QgHSaa__filterSelect",filters:"evaluations-module__QgHSaa__filters",formError:"evaluations-module__QgHSaa__formError",formGroup:"evaluations-module__QgHSaa__formGroup",formRow:"evaluations-module__QgHSaa__formRow",grid:"evaluations-module__QgHSaa__grid",gridContainer:"evaluations-module__QgHSaa__gridContainer",header:"evaluations-module__QgHSaa__header",loader:"evaluations-module__QgHSaa__loader",loading:"evaluations-module__QgHSaa__loading",modal:"evaluations-module__QgHSaa__modal",modalActions:"evaluations-module__QgHSaa__modalActions",modalForm:"evaluations-module__QgHSaa__modalForm",modalHeader:"evaluations-module__QgHSaa__modalHeader",modalOverlay:"evaluations-module__QgHSaa__modalOverlay",noteInput:"evaluations-module__QgHSaa__noteInput",overallPreview:"evaluations-module__QgHSaa__overallPreview",overallScore:"evaluations-module__QgHSaa__overallScore",pageBtn:"evaluations-module__QgHSaa__pageBtn",pageInfo:"evaluations-module__QgHSaa__pageInfo",pagination:"evaluations-module__QgHSaa__pagination",scoreBar:"evaluations-module__QgHSaa__scoreBar",scoreHigh:"evaluations-module__QgHSaa__scoreHigh",scoreInput:"evaluations-module__QgHSaa__scoreInput",scoreInputWithNote:"evaluations-module__QgHSaa__scoreInputWithNote",scoreInputs:"evaluations-module__QgHSaa__scoreInputs",scoreItem:"evaluations-module__QgHSaa__scoreItem",scoreLabel:"evaluations-module__QgHSaa__scoreLabel",scoreLow:"evaluations-module__QgHSaa__scoreLow",scoreMedium:"evaluations-module__QgHSaa__scoreMedium",scoreProgress:"evaluations-module__QgHSaa__scoreProgress",scoreValue:"evaluations-module__QgHSaa__scoreValue",scores:"evaluations-module__QgHSaa__scores",sectionTitle:"evaluations-module__QgHSaa__sectionTitle",spin:"evaluations-module__QgHSaa__spin",submitBtn:"evaluations-module__QgHSaa__submitBtn",subtitle:"evaluations-module__QgHSaa__subtitle",teacherId:"evaluations-module__QgHSaa__teacherId",teacherInfo:"evaluations-module__QgHSaa__teacherInfo",teacherName:"evaluations-module__QgHSaa__teacherName",title:"evaluations-module__QgHSaa__title"})},59259,e=>{"use strict";var a=e.i(43476),s=e.i(71645),l=e.i(70273),t=e.i(7233),n=e.i(87130),o=e.i(87316),r=e.i(63059),i=e.i(73375),d=e.i(37727),c=e.i(84614),u=e.i(25508);function m(){let[e,d]=(0,s.useState)([]),[m,_]=(0,s.useState)([]),[v,p]=(0,s.useState)(!0),[x,g]=(0,s.useState)(""),[f,j]=(0,s.useState)(1),[N,S]=(0,s.useState)(1),[y,H]=(0,s.useState)(!1),[I,Q]=(0,s.useState)(null),b=async()=>{try{let e=await fetch("/api/auth/session"),a=await e.json();a.authenticated&&Q(a.user)}catch(e){console.error("Failed to fetch user:",e)}},w=(0,s.useCallback)(async()=>{p(!0);try{let e=new URLSearchParams({page:f.toString(),limit:"15"});x&&e.set("teacherId",x);let a=await fetch(`/api/evaluations?${e}`),s=await a.json();d(s.evaluations),S(s.pagination.totalPages)}catch(e){console.error("Failed to fetch evaluations:",e)}finally{p(!1)}},[f,x]),C=async()=>{try{let e=await fetch("/api/teachers?limit=100&status=active"),a=await e.json();_(a.teachers||[])}catch(e){console.error("Failed to fetch teachers:",e)}};(0,s.useEffect)(()=>{w()},[w]),(0,s.useEffect)(()=>{C(),b()},[]);let P=I?.role==="teacher";return(0,a.jsxs)("div",{className:u.default.container,children:[(0,a.jsxs)("div",{className:u.default.header,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:u.default.title,children:P?"تقييماتي":"تقييمات الأداء"}),(0,a.jsx)("p",{className:u.default.subtitle,children:P?"سجل تقييمات أدائك وتطورك المهني":"تقييم ومتابعة أداء المدرسين"})]}),!P&&(0,a.jsxs)("button",{className:u.default.addButton,onClick:()=>H(!0),children:[(0,a.jsx)(t.Plus,{size:18}),"تقييم جديد"]})]}),!P&&(0,a.jsx)("div",{className:u.default.filters,children:(0,a.jsxs)("div",{className:u.default.filterGroup,children:[(0,a.jsx)(n.Filter,{size:18}),(0,a.jsxs)("select",{value:x,onChange:e=>{g(e.target.value),j(1)},className:u.default.filterSelect,children:[(0,a.jsx)("option",{value:"",children:"جميع المدرسين"}),m.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),(0,a.jsxs)("div",{className:u.default.gridContainer,children:[v?(0,a.jsxs)("div",{className:u.default.loading,children:[(0,a.jsx)("div",{className:u.default.loader}),(0,a.jsx)("p",{children:"جاري التحميل..."})]}):0===e.length?(0,a.jsxs)("div",{className:u.default.empty,children:[(0,a.jsx)(l.Star,{size:48}),(0,a.jsx)("h3",{children:"لا توجد تقييمات"}),(0,a.jsx)("p",{children:"لم يتم إضافة تقييمات بعد"})]}):(0,a.jsx)("div",{className:u.default.grid,children:e.map(e=>{var s,t;return(0,a.jsxs)("div",{className:u.default.card,children:[(0,a.jsxs)("div",{className:u.default.cardHeader,children:[(0,a.jsxs)("div",{className:u.default.teacherInfo,children:[(0,a.jsx)("div",{className:u.default.avatar,children:e.teacher.name.charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:u.default.teacherName,children:e.teacher.name}),(0,a.jsx)("p",{className:u.default.teacherId,children:e.teacher.employeeId})]})]}),(0,a.jsxs)("div",{className:`${u.default.overallScore} ${(s=e.overallScore)>=8?u.default.scoreHigh:s>=6?u.default.scoreMedium:u.default.scoreLow}`,children:[(0,a.jsx)(l.Star,{size:18}),(0,a.jsx)("span",{children:e.overallScore.toFixed(1)}),(0,a.jsx)("small",{children:(t=e.overallScore)>=9?"ممتاز":t>=8?"جيد جداً":t>=7?"جيد":t>=6?"مقبول":"ضعيف"})]})]}),(0,a.jsxs)("div",{className:u.default.scores,children:[(0,a.jsxs)("div",{className:u.default.scoreItem,children:[(0,a.jsx)("span",{className:u.default.scoreLabel,children:"التخطيط والإعداد للدرس"}),(0,a.jsx)("div",{className:u.default.scoreBar,children:(0,a.jsx)("div",{className:u.default.scoreProgress,style:{width:`${10*(e.lessonPlanning||0)}%`}})}),(0,a.jsxs)("span",{className:u.default.scoreValue,children:[e.lessonPlanning||0,"/10"]})]}),(0,a.jsxs)("div",{className:u.default.scoreItem,children:[(0,a.jsx)("span",{className:u.default.scoreLabel,children:"تنفيذ الدرس والتدريس"}),(0,a.jsx)("div",{className:u.default.scoreBar,children:(0,a.jsx)("div",{className:u.default.scoreProgress,style:{width:`${10*(e.lessonExecution||0)}%`}})}),(0,a.jsxs)("span",{className:u.default.scoreValue,children:[e.lessonExecution||0,"/10"]})]}),(0,a.jsxs)("div",{className:u.default.scoreItem,children:[(0,a.jsx)("span",{className:u.default.scoreLabel,children:"إدارة الصف والبيئة التعليمية"}),(0,a.jsx)("div",{className:u.default.scoreBar,children:(0,a.jsx)("div",{className:u.default.scoreProgress,style:{width:`${10*(e.classroomManagement||0)}%`}})}),(0,a.jsxs)("span",{className:u.default.scoreValue,children:[e.classroomManagement||0,"/10"]})]}),(0,a.jsxs)("div",{className:u.default.scoreItem,children:[(0,a.jsx)("span",{className:u.default.scoreLabel,children:"النمو المهني والمهنية"}),(0,a.jsx)("div",{className:u.default.scoreBar,children:(0,a.jsx)("div",{className:u.default.scoreProgress,style:{width:`${10*(e.professionalGrowth||0)}%`}})}),(0,a.jsxs)("span",{className:u.default.scoreValue,children:[e.professionalGrowth||0,"/10"]})]})]}),e.comments&&(0,a.jsx)("div",{className:u.default.comments,children:(0,a.jsx)("p",{children:e.comments})}),(0,a.jsxs)("div",{className:u.default.cardFooter,children:[(0,a.jsxs)("span",{className:u.default.date,children:[(0,a.jsx)(o.Calendar,{size:14}),new Date(e.date).toLocaleDateString("ar-SA")]}),(0,a.jsxs)("span",{className:u.default.evaluator,children:[(0,a.jsx)(c.User,{size:14}),e.evaluator.name]})]})]},e.id)})}),N>1&&(0,a.jsxs)("div",{className:u.default.pagination,children:[(0,a.jsxs)("button",{className:u.default.pageBtn,disabled:1===f,onClick:()=>j(e=>e-1),children:[(0,a.jsx)(r.ChevronRight,{size:18}),"السابق"]}),(0,a.jsxs)("span",{className:u.default.pageInfo,children:["صفحة ",f," من ",N]}),(0,a.jsxs)("button",{className:u.default.pageBtn,disabled:f===N,onClick:()=>j(e=>e+1),children:["التالي",(0,a.jsx)(i.ChevronLeft,{size:18})]})]})]}),y&&(0,a.jsx)(h,{teachers:m,onClose:()=>H(!1),onSave:()=>{H(!1),w()}})]})}function h({teachers:e,onClose:l,onSave:t}){let[n,o]=(0,s.useState)({teacherId:"",date:new Date().toISOString().split("T")[0],teachingQuality:7,punctuality:7,studentInteraction:7,curriculumAdherence:7,lessonPlanning:7,lessonExecution:7,classroomManagement:7,professionalGrowth:7,lessonPlanningNote:"",lessonExecutionNote:"",classroomManagementNote:"",professionalGrowthNote:"",comments:""}),[r,i]=(0,s.useState)(!1),[c,m]=(0,s.useState)(""),h=async e=>{if(e.preventDefault(),!n.teacherId)return void m("يرجى اختيار المدرس");i(!0),m("");try{let e=await fetch("/api/evaluations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),a=await e.json();if(!e.ok)return void m(a.error||"حدث خطأ");t()}catch{m("حدث خطأ في الاتصال")}finally{i(!1)}},_=(n.teachingQuality+n.punctuality+n.studentInteraction+n.curriculumAdherence)/4,v=(n.lessonPlanning+n.lessonExecution+n.classroomManagement+n.professionalGrowth)/4;return(0,a.jsx)("div",{className:u.default.modalOverlay,onClick:l,children:(0,a.jsxs)("div",{className:u.default.modal,onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:u.default.modalHeader,children:[(0,a.jsx)("h2",{children:"تقييم جديد"}),(0,a.jsx)("button",{className:u.default.closeModal,onClick:l,children:(0,a.jsx)(d.X,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:h,className:u.default.modalForm,children:[(0,a.jsxs)("div",{className:u.default.formRow,children:[(0,a.jsxs)("div",{className:u.default.formGroup,children:[(0,a.jsx)("label",{children:"المدرس *"}),(0,a.jsxs)("select",{value:n.teacherId,onChange:e=>o({...n,teacherId:e.target.value}),required:!0,children:[(0,a.jsx)("option",{value:"",children:"اختر المدرس"}),e.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:u.default.formGroup,children:[(0,a.jsx)("label",{children:"التاريخ *"}),(0,a.jsx)("input",{type:"date",value:n.date,onChange:e=>o({...n,date:e.target.value}),required:!0})]})]}),(0,a.jsx)("h3",{className:u.default.sectionTitle,children:"معايير الأداء الأساسية"}),(0,a.jsxs)("div",{className:u.default.scoreInputs,children:[(0,a.jsxs)("div",{className:u.default.scoreInput,children:[(0,a.jsx)("label",{children:"جودة التدريس"}),(0,a.jsx)("input",{type:"range",min:"1",max:"10",value:n.teachingQuality,onChange:e=>o({...n,teachingQuality:parseInt(e.target.value)})}),(0,a.jsxs)("span",{children:[n.teachingQuality,"/10"]})]}),(0,a.jsxs)("div",{className:u.default.scoreInput,children:[(0,a.jsx)("label",{children:"الالتزام بالمواعيد"}),(0,a.jsx)("input",{type:"range",min:"1",max:"10",value:n.punctuality,onChange:e=>o({...n,punctuality:parseInt(e.target.value)})}),(0,a.jsxs)("span",{children:[n.punctuality,"/10"]})]}),(0,a.jsxs)("div",{className:u.default.scoreInput,children:[(0,a.jsx)("label",{children:"التفاعل مع الطلاب"}),(0,a.jsx)("input",{type:"range",min:"1",max:"10",value:n.studentInteraction,onChange:e=>o({...n,studentInteraction:parseInt(e.target.value)})}),(0,a.jsxs)("span",{children:[n.studentInteraction,"/10"]})]}),(0,a.jsxs)("div",{className:u.default.scoreInput,children:[(0,a.jsx)("label",{children:"الالتزام بالمنهج"}),(0,a.jsx)("input",{type:"range",min:"1",max:"10",value:n.curriculumAdherence,onChange:e=>o({...n,curriculumAdherence:parseInt(e.target.value)})}),(0,a.jsxs)("span",{children:[n.curriculumAdherence,"/10"]})]})]}),(0,a.jsx)("h3",{className:u.default.sectionTitle,children:"معايير التقييم التفصيلية"}),(0,a.jsxs)("div",{className:u.default.scoreInputs,children:[(0,a.jsxs)("div",{className:u.default.scoreInputWithNote,children:[(0,a.jsxs)("div",{className:u.default.scoreInput,children:[(0,a.jsx)("label",{children:"التخطيط والإعداد للدرس"}),(0,a.jsx)("input",{type:"range",min:"1",max:"10",value:n.lessonPlanning,onChange:e=>o({...n,lessonPlanning:parseInt(e.target.value)})}),(0,a.jsxs)("span",{children:[n.lessonPlanning,"/10"]})]}),(0,a.jsx)("input",{type:"text",className:u.default.noteInput,placeholder:"ملاحظة على التخطيط...",value:n.lessonPlanningNote,onChange:e=>o({...n,lessonPlanningNote:e.target.value})})]}),(0,a.jsxs)("div",{className:u.default.scoreInputWithNote,children:[(0,a.jsxs)("div",{className:u.default.scoreInput,children:[(0,a.jsx)("label",{children:"تنفيذ الدرس والتدريس"}),(0,a.jsx)("input",{type:"range",min:"1",max:"10",value:n.lessonExecution,onChange:e=>o({...n,lessonExecution:parseInt(e.target.value)})}),(0,a.jsxs)("span",{children:[n.lessonExecution,"/10"]})]}),(0,a.jsx)("input",{type:"text",className:u.default.noteInput,placeholder:"ملاحظة على التنفيذ...",value:n.lessonExecutionNote,onChange:e=>o({...n,lessonExecutionNote:e.target.value})})]}),(0,a.jsxs)("div",{className:u.default.scoreInputWithNote,children:[(0,a.jsxs)("div",{className:u.default.scoreInput,children:[(0,a.jsx)("label",{children:"إدارة الصف والبيئة التعليمية"}),(0,a.jsx)("input",{type:"range",min:"1",max:"10",value:n.classroomManagement,onChange:e=>o({...n,classroomManagement:parseInt(e.target.value)})}),(0,a.jsxs)("span",{children:[n.classroomManagement,"/10"]})]}),(0,a.jsx)("input",{type:"text",className:u.default.noteInput,placeholder:"ملاحظة على الإدارة...",value:n.classroomManagementNote,onChange:e=>o({...n,classroomManagementNote:e.target.value})})]}),(0,a.jsxs)("div",{className:u.default.scoreInputWithNote,children:[(0,a.jsxs)("div",{className:u.default.scoreInput,children:[(0,a.jsx)("label",{children:"النمو المهني والمهنية"}),(0,a.jsx)("input",{type:"range",min:"1",max:"10",value:n.professionalGrowth,onChange:e=>o({...n,professionalGrowth:parseInt(e.target.value)})}),(0,a.jsxs)("span",{children:[n.professionalGrowth,"/10"]})]}),(0,a.jsx)("input",{type:"text",className:u.default.noteInput,placeholder:"ملاحظة على النمو المهني...",value:n.professionalGrowthNote,onChange:e=>o({...n,professionalGrowthNote:e.target.value})})]})]}),(0,a.jsxs)("div",{className:u.default.overallPreview,children:[(0,a.jsx)("span",{children:"المتوسط العام:"}),(0,a.jsx)("strong",{children:((_+v)/2).toFixed(1)})]}),(0,a.jsxs)("div",{className:u.default.formGroup,children:[(0,a.jsx)("label",{children:"ملاحظات عامة"}),(0,a.jsx)("textarea",{value:n.comments,onChange:e=>o({...n,comments:e.target.value}),rows:3,placeholder:"أضف ملاحظاتك العامة هنا..."})]}),c&&(0,a.jsx)("div",{className:u.default.formError,children:c}),(0,a.jsxs)("div",{className:u.default.modalActions,children:[(0,a.jsx)("button",{type:"button",className:u.default.cancelBtn,onClick:l,children:"إلغاء"}),(0,a.jsx)("button",{type:"submit",className:u.default.submitBtn,disabled:r,children:r?"جاري الحفظ...":"حفظ التقييم"})]})]})]})})}e.s(["default",()=>m])}]);