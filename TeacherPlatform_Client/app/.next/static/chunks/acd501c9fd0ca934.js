(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},63059,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],63059)},87130,e=>{"use strict";let t=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>t],87130)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},78894,e=>{"use strict";let t=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},52571,e=>{"use strict";let t=(0,e.i(75254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["Info",()=>t],52571)},417,e=>{"use strict";let t=(0,e.i(75254).default)("thumbs-up",[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]]);e.s(["ThumbsUp",()=>t],417)},22040,e=>{e.v({addButton:"notes-module__waCtQG__addButton",cancelBtn:"notes-module__waCtQG__cancelBtn",closeModal:"notes-module__waCtQG__closeModal",container:"notes-module__waCtQG__container",empty:"notes-module__waCtQG__empty",filterGroup:"notes-module__waCtQG__filterGroup",filterSelect:"notes-module__waCtQG__filterSelect",filters:"notes-module__waCtQG__filters",formError:"notes-module__waCtQG__formError",formGroup:"notes-module__waCtQG__formGroup",header:"notes-module__waCtQG__header",list:"notes-module__waCtQG__list",listCard:"notes-module__waCtQG__listCard",loader:"notes-module__waCtQG__loader",loading:"notes-module__waCtQG__loading",modal:"notes-module__waCtQG__modal",modalActions:"notes-module__waCtQG__modalActions",modalForm:"notes-module__waCtQG__modalForm",modalHeader:"notes-module__waCtQG__modalHeader",modalOverlay:"notes-module__waCtQG__modalOverlay",noteContent:"notes-module__waCtQG__noteContent",noteHeader:"notes-module__waCtQG__noteHeader",noteIcon:"notes-module__waCtQG__noteIcon",noteItem:"notes-module__waCtQG__noteItem",noteMeta:"notes-module__waCtQG__noteMeta",noteText:"notes-module__waCtQG__noteText",pageBtn:"notes-module__waCtQG__pageBtn",pageInfo:"notes-module__waCtQG__pageInfo",pagination:"notes-module__waCtQG__pagination",spin:"notes-module__waCtQG__spin",submitBtn:"notes-module__waCtQG__submitBtn",subtitle:"notes-module__waCtQG__subtitle",teacherName:"notes-module__waCtQG__teacherName",title:"notes-module__waCtQG__title",typeBadge:"notes-module__waCtQG__typeBadge",typeImprovement:"notes-module__waCtQG__typeImprovement",typeInfo:"notes-module__waCtQG__typeInfo",typeNeeds_improvement:"notes-module__waCtQG__typeNeeds_improvement",typeOption:"notes-module__waCtQG__typeOption",typeOptions:"notes-module__waCtQG__typeOptions",typePositive:"notes-module__waCtQG__typePositive",typeSelected:"notes-module__waCtQG__typeSelected",typeWarning:"notes-module__waCtQG__typeWarning"})},40420,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(86311),l=e.i(7233),n=e.i(87130),o=e.i(417),i=e.i(78894),d=e.i(52571),r=e.i(25652),c=e.i(63059),u=e.i(73375),_=e.i(37727),m=e.i(87316),h=e.i(84614),p=e.i(22040);function f(){let[e,_]=(0,a.useState)([]),[f,x]=(0,a.useState)([]),[y,j]=(0,a.useState)(!0),[C,w]=(0,a.useState)(""),[g,G]=(0,a.useState)(1),[N,b]=(0,a.useState)(1),[Q,k]=(0,a.useState)(!1),[S,I]=(0,a.useState)(null),M=async()=>{try{let e=await fetch("/api/auth/session"),t=await e.json();t.authenticated&&I(t.user)}catch(e){console.error("Failed to fetch user:",e)}},z=(0,a.useCallback)(async()=>{j(!0);try{let e=new URLSearchParams({page:g.toString(),limit:"20"});C&&e.set("type",C);let t=await fetch(`/api/notes?${e}`),a=await t.json();_(a.notes),b(a.pagination.totalPages)}catch(e){console.error("Failed to fetch notes:",e)}finally{j(!1)}},[g,C]),B=async()=>{try{let e=await fetch("/api/teachers?limit=100"),t=await e.json();x(t.teachers||[])}catch(e){console.error("Failed to fetch teachers:",e)}};(0,a.useEffect)(()=>{z()},[z]),(0,a.useEffect)(()=>{B(),M()},[]);let T=S?.role==="teacher";return(0,t.jsxs)("div",{className:p.default.container,children:[(0,t.jsxs)("div",{className:p.default.header,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:p.default.title,children:T?"ملاحظاتي":"الملاحظات الإدارية"}),(0,t.jsx)("p",{className:p.default.subtitle,children:T?"الملاحظات المسجلة على أدائك":"تسجيل ومتابعة الملاحظات على المدرسين"})]}),!T&&(0,t.jsxs)("button",{className:p.default.addButton,onClick:()=>k(!0),children:[(0,t.jsx)(l.Plus,{size:18}),"إضافة ملاحظة"]})]}),(0,t.jsx)("div",{className:p.default.filters,children:(0,t.jsxs)("div",{className:p.default.filterGroup,children:[(0,t.jsx)(n.Filter,{size:18}),(0,t.jsxs)("select",{value:C,onChange:e=>{w(e.target.value),G(1)},className:p.default.filterSelect,children:[(0,t.jsx)("option",{value:"",children:"جميع الأنواع"}),(0,t.jsx)("option",{value:"positive",children:"إيجابي"}),(0,t.jsx)("option",{value:"needs_improvement",children:"يحتاج تطوير"}),(0,t.jsx)("option",{value:"warning",children:"تنبيه"}),(0,t.jsx)("option",{value:"info",children:"معلومة"})]})]})}),(0,t.jsx)("div",{className:p.default.listCard,children:y?(0,t.jsxs)("div",{className:p.default.loading,children:[(0,t.jsx)("div",{className:p.default.loader}),(0,t.jsx)("p",{children:"جاري التحميل..."})]}):0===e.length?(0,t.jsxs)("div",{className:p.default.empty,children:[(0,t.jsx)(s.MessageSquare,{size:48}),(0,t.jsx)("h3",{children:"لا توجد ملاحظات"}),(0,t.jsx)("p",{children:"لم يتم إضافة ملاحظات بعد"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:p.default.list,children:e.map(e=>{var a;let s,l=(a=e.type,(s={positive:{label:"إيجابي",icon:(0,t.jsx)(o.ThumbsUp,{size:16}),class:"typePositive"},needs_improvement:{label:"يحتاج تطوير",icon:(0,t.jsx)(r.TrendingUp,{size:16}),class:"typeImprovement"},warning:{label:"تنبيه",icon:(0,t.jsx)(i.AlertTriangle,{size:16}),class:"typeWarning"},info:{label:"معلومة",icon:(0,t.jsx)(d.Info,{size:16}),class:"typeInfo"}})[a]||s.info);return(0,t.jsxs)("div",{className:p.default.noteItem,children:[(0,t.jsx)("div",{className:`${p.default.noteIcon} ${p.default[l.class]}`,children:l.icon}),(0,t.jsxs)("div",{className:p.default.noteContent,children:[(0,t.jsxs)("div",{className:p.default.noteHeader,children:[(0,t.jsx)("span",{className:p.default.teacherName,children:e.teacher.name}),(0,t.jsx)("span",{className:`${p.default.typeBadge} ${p.default[l.class]}`,children:l.label})]}),(0,t.jsx)("p",{className:p.default.noteText,children:e.content}),(0,t.jsxs)("div",{className:p.default.noteMeta,children:[(0,t.jsxs)("span",{children:[(0,t.jsx)(h.User,{size:12}),e.author.name]}),(0,t.jsxs)("span",{children:[(0,t.jsx)(m.Calendar,{size:12}),new Date(e.createdAt).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric"})]})]})]})]},e.id)})}),N>1&&(0,t.jsxs)("div",{className:p.default.pagination,children:[(0,t.jsxs)("button",{className:p.default.pageBtn,disabled:1===g,onClick:()=>G(e=>e-1),children:[(0,t.jsx)(c.ChevronRight,{size:18}),"السابق"]}),(0,t.jsxs)("span",{className:p.default.pageInfo,children:["صفحة ",g," من ",N]}),(0,t.jsxs)("button",{className:p.default.pageBtn,disabled:g===N,onClick:()=>G(e=>e+1),children:["التالي",(0,t.jsx)(u.ChevronLeft,{size:18})]})]})]})}),Q&&(0,t.jsx)(v,{teachers:f,onClose:()=>k(!1),onSave:()=>{k(!1),z()}})]})}function v({teachers:e,onClose:s,onSave:l}){let[n,c]=(0,a.useState)({teacherId:"",type:"info",content:""}),[u,m]=(0,a.useState)(!1),[h,f]=(0,a.useState)(""),v=async e=>{if(e.preventDefault(),!n.teacherId||!n.content)return void f("يرجى ملء جميع الحقول");m(!0),f("");try{let e=await fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),t=await e.json();if(!e.ok)return void f(t.error||"حدث خطأ");l()}catch{f("حدث خطأ في الاتصال")}finally{m(!1)}};return(0,t.jsx)("div",{className:p.default.modalOverlay,onClick:s,children:(0,t.jsxs)("div",{className:p.default.modal,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:p.default.modalHeader,children:[(0,t.jsx)("h2",{children:"إضافة ملاحظة جديدة"}),(0,t.jsx)("button",{className:p.default.closeModal,onClick:s,children:(0,t.jsx)(_.X,{size:20})})]}),(0,t.jsxs)("form",{onSubmit:v,className:p.default.modalForm,children:[(0,t.jsxs)("div",{className:p.default.formGroup,children:[(0,t.jsx)("label",{children:"المدرس *"}),(0,t.jsxs)("select",{value:n.teacherId,onChange:e=>c({...n,teacherId:e.target.value}),required:!0,children:[(0,t.jsx)("option",{value:"",children:"اختر المدرس"}),e.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:p.default.formGroup,children:[(0,t.jsx)("label",{children:"نوع الملاحظة"}),(0,t.jsx)("div",{className:p.default.typeOptions,children:[{value:"positive",label:"إيجابي",icon:(0,t.jsx)(o.ThumbsUp,{size:16})},{value:"needs_improvement",label:"يحتاج تطوير",icon:(0,t.jsx)(r.TrendingUp,{size:16})},{value:"warning",label:"تنبيه",icon:(0,t.jsx)(i.AlertTriangle,{size:16})},{value:"info",label:"معلومة",icon:(0,t.jsx)(d.Info,{size:16})}].map(e=>(0,t.jsxs)("button",{type:"button",className:`${p.default.typeOption} ${n.type===e.value?p.default.typeSelected:""} ${p.default[`type${e.value.charAt(0).toUpperCase()+e.value.slice(1).replace("_","")}`]}`,onClick:()=>c({...n,type:e.value}),children:[e.icon,e.label]},e.value))})]}),(0,t.jsxs)("div",{className:p.default.formGroup,children:[(0,t.jsx)("label",{children:"الملاحظة *"}),(0,t.jsx)("textarea",{value:n.content,onChange:e=>c({...n,content:e.target.value}),rows:4,placeholder:"اكتب الملاحظة هنا...",required:!0})]}),h&&(0,t.jsx)("div",{className:p.default.formError,children:h}),(0,t.jsxs)("div",{className:p.default.modalActions,children:[(0,t.jsx)("button",{type:"button",className:p.default.cancelBtn,onClick:s,children:"إلغاء"}),(0,t.jsx)("button",{type:"submit",className:p.default.submitBtn,disabled:u,children:u?"جاري الحفظ...":"حفظ الملاحظة"})]})]})]})})}e.s(["default",()=>f])}]);