(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},63059,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],63059)},87130,e=>{"use strict";let t=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>t],87130)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},79002,e=>{"use strict";let t=(0,e.i(75254).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["UserPlus",()=>t],79002)},80897,e=>{e.v({activitiesGrid:"activities-module__262WTW__activitiesGrid",activitiesList:"activities-module__262WTW__activitiesList",activityCard:"activities-module__262WTW__activityCard",activityDescription:"activities-module__262WTW__activityDescription",activityMeta:"activities-module__262WTW__activityMeta",activityTitle:"activities-module__262WTW__activityTitle",addButton:"activities-module__262WTW__addButton",cancelBtn:"activities-module__262WTW__cancelBtn",cardActions:"activities-module__262WTW__cardActions",cardHeader:"activities-module__262WTW__cardHeader",categoriesGrid:"activities-module__262WTW__categoriesGrid",categoriesSection:"activities-module__262WTW__categoriesSection",categoryBadge:"activities-module__262WTW__categoryBadge",categoryCard:"activities-module__262WTW__categoryCard",categoryIcon:"activities-module__262WTW__categoryIcon",categoryInfo:"activities-module__262WTW__categoryInfo",categorySelected:"activities-module__262WTW__categorySelected",container:"activities-module__262WTW__container",deleteButton:"activities-module__262WTW__deleteButton",empty:"activities-module__262WTW__empty",filterGroup:"activities-module__262WTW__filterGroup",filters:"activities-module__262WTW__filters",formError:"activities-module__262WTW__formError",formGroup:"activities-module__262WTW__formGroup",formRow:"activities-module__262WTW__formRow",header:"activities-module__262WTW__header",headerActions:"activities-module__262WTW__headerActions",headerContent:"activities-module__262WTW__headerContent",headerIcon:"activities-module__262WTW__headerIcon",initButton:"activities-module__262WTW__initButton",loader:"activities-module__262WTW__loader",loading:"activities-module__262WTW__loading",metaItem:"activities-module__262WTW__metaItem",modal:"activities-module__262WTW__modal",modalActions:"activities-module__262WTW__modalActions",modalForm:"activities-module__262WTW__modalForm",modalHeader:"activities-module__262WTW__modalHeader",modalOverlay:"activities-module__262WTW__modalOverlay",pagination:"activities-module__262WTW__pagination",sectionHeader:"activities-module__262WTW__sectionHeader",spin:"activities-module__262WTW__spin",statusBadge:"activities-module__262WTW__statusBadge",statusCancelled:"activities-module__262WTW__statusCancelled",statusCompleted:"activities-module__262WTW__statusCompleted",statusOngoing:"activities-module__262WTW__statusOngoing",statusUpcoming:"activities-module__262WTW__statusUpcoming",submitBtn:"activities-module__262WTW__submitBtn",subtitle:"activities-module__262WTW__subtitle",teacherInfo:"activities-module__262WTW__teacherInfo",title:"activities-module__262WTW__title",viewButton:"activities-module__262WTW__viewButton"})},2060,e=>{"use strict";var t=e.i(43476),a=e.i(71645),i=e.i(10980),s=e.i(87316),l=e.i(75254);let c=(0,l.default)("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),d=(0,l.default)("feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]);var r=e.i(61911),o=e.i(3116),n=e.i(46897),u=e.i(7233),h=e.i(87130),m=e.i(73375),_=e.i(63059),v=e.i(70273),p=e.i(37727),f=e.i(79002),x=e.i(86536),j=e.i(27612),y=e.i(22016),W=e.i(80897);let g={"يوم اللغة العربية":(0,t.jsx)(i.BookOpen,{size:28}),"يوم المكتبة":(0,t.jsx)(c,{size:28}),"يوم الشعر":(0,t.jsx)(d,{size:28}),"يوم الحقوق الإنسانية":(0,t.jsx)(r.Users,{size:28})},T={"يوم اللغة العربية":"#1e3a5f","يوم المكتبة":"#2d5a8a","يوم الشعر":"#6b4c9a","يوم الحقوق الإنسانية":"#2f855a"};function N(){let[e,l]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[r,p]=(0,a.useState)([]),[N,C]=(0,a.useState)(!0),[b,S]=(0,a.useState)(null),[B,w]=(0,a.useState)(""),[I,M]=(0,a.useState)(1),[z,G]=(0,a.useState)(1),[A,O]=(0,a.useState)(!1),[P,H]=(0,a.useState)(null),F=async()=>{try{let e=await fetch("/api/auth/session"),t=await e.json();t.authenticated&&H(t.user)}catch(e){console.error("Failed to fetch user:",e)}},E=async()=>{try{let e=await fetch("/api/activity-categories"),t=await e.json();l(t.categories||[])}catch(e){console.error("Failed to fetch categories:",e)}},L=(0,a.useCallback)(async()=>{C(!0);try{let e=new URLSearchParams({page:I.toString(),limit:"10"});b&&e.set("categoryId",b.toString()),B&&e.set("status",B);let t=await fetch(`/api/activities?${e}`),a=await t.json();d(a.activities||[]),G(a.pagination?.totalPages||1)}catch(e){console.error("Failed to fetch activities:",e)}finally{C(!1)}},[I,b,B]),R=async()=>{try{let e=await fetch("/api/teachers?limit=100&status=active"),t=await e.json();p(t.teachers||[])}catch(e){console.error("Failed to fetch teachers:",e)}};(0,a.useEffect)(()=>{E(),R(),F()},[]);let U=P?.role==="teacher";(0,a.useEffect)(()=>{L()},[L]);let q=async()=>{for(let e of[{name:"يوم اللغة العربية",description:"احتفالية خاصة بيوم اللغة العربية العالمي",icon:"BookOpen",color:"#1e3a5f"},{name:"يوم المكتبة",description:"يوم مخصص لتعزيز ثقافة القراءة",icon:"Library",color:"#2d5a8a"},{name:"يوم الشعر",description:"أمسية شعرية تحتفي بالشعر العربي",icon:"Feather",color:"#6b4c9a"},{name:"يوم الحقوق الإنسانية",description:"فعالية توعوية عن حقوق الإنسان",icon:"Users",color:"#2f855a"}])await fetch("/api/activity-categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});E()},$=async(e,t)=>{if(confirm(`هل أنت متأكد من حذف النشاط "${t}"؟`))try{let t=await fetch(`/api/activities/${e}`,{method:"DELETE"});if(t.ok)L(),E();else{let e=await t.json();alert(e.error||"فشل حذف النشاط")}}catch(e){console.error("Failed to delete activity:",e)}};return(0,t.jsxs)("div",{className:W.default.container,children:[(0,t.jsxs)("div",{className:W.default.header,children:[(0,t.jsxs)("div",{className:W.default.headerContent,children:[(0,t.jsx)("div",{className:W.default.headerIcon,children:(0,t.jsx)(i.BookOpen,{size:32})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:W.default.title,children:"أنشطة اللغة العربية"}),(0,t.jsx)("p",{className:W.default.subtitle,children:"نظام متابعة وتقييم الفعاليات الثقافية واللغوية"})]})]}),(0,t.jsx)("div",{className:W.default.headerActions,children:(0,t.jsxs)("button",{className:W.default.addButton,onClick:()=>O(!0),children:[(0,t.jsx)(u.Plus,{size:18}),"إضافة نشاط"]})})]}),(0,t.jsxs)("div",{className:W.default.categoriesSection,children:[(0,t.jsxs)("div",{className:W.default.sectionHeader,children:[(0,t.jsx)("h2",{children:"فئات الأنشطة"}),0===e.length&&(0,t.jsx)("button",{className:W.default.initButton,onClick:q,children:"تهيئة الفئات الأساسية"})]}),(0,t.jsx)("div",{className:W.default.categoriesGrid,children:e.map(e=>(0,t.jsxs)("button",{className:`${W.default.categoryCard} ${b===e.id?W.default.categorySelected:""}`,onClick:()=>S(b===e.id?null:e.id),style:{"--category-color":T[e.name]||"#1e3a5f"},children:[(0,t.jsx)("div",{className:W.default.categoryIcon,children:g[e.name]||(0,t.jsx)(v.Star,{size:28})}),(0,t.jsxs)("div",{className:W.default.categoryInfo,children:[(0,t.jsx)("h3",{children:e.name}),(0,t.jsxs)("span",{children:[e._count.activities," نشاط"]})]})]},e.id))})]}),(0,t.jsx)("div",{className:W.default.filters,children:(0,t.jsxs)("div",{className:W.default.filterGroup,children:[(0,t.jsx)(h.Filter,{size:18}),(0,t.jsxs)("select",{value:B,onChange:e=>{w(e.target.value),M(1)},children:[(0,t.jsx)("option",{value:"",children:"جميع الحالات"}),(0,t.jsx)("option",{value:"upcoming",children:"قادمة"}),(0,t.jsx)("option",{value:"ongoing",children:"جارية"}),(0,t.jsx)("option",{value:"completed",children:"منتهية"})]})]})}),(0,t.jsxs)("div",{className:W.default.activitiesList,children:[N?(0,t.jsxs)("div",{className:W.default.loading,children:[(0,t.jsx)("div",{className:W.default.loader}),(0,t.jsx)("p",{children:"جاري التحميل..."})]}):0===c.length?(0,t.jsxs)("div",{className:W.default.empty,children:[(0,t.jsx)(i.BookOpen,{size:48}),(0,t.jsx)("h3",{children:"لا توجد أنشطة"}),(0,t.jsx)("p",{children:"لم يتم إضافة أي أنشطة بعد"})]}):(0,t.jsx)("div",{className:W.default.activitiesGrid,children:c.map(e=>{var a;let i;return(0,t.jsxs)("div",{className:W.default.activityCard,children:[(0,t.jsxs)("div",{className:W.default.cardHeader,children:[(0,t.jsx)("span",{className:W.default.categoryBadge,children:e.category.name}),(0,t.jsx)("span",{className:`${W.default.statusBadge} ${(i=e.status,W.default[`status${i.charAt(0).toUpperCase()+i.slice(1)}`])}`,children:{upcoming:"قادمة",ongoing:"جارية",completed:"منتهية",cancelled:"ملغاة"}[a=e.status]||a})]}),(0,t.jsx)("h3",{className:W.default.activityTitle,children:e.title}),e.description&&(0,t.jsx)("p",{className:W.default.activityDescription,children:e.description}),(0,t.jsxs)("div",{className:W.default.activityMeta,children:[(0,t.jsxs)("div",{className:W.default.metaItem,children:[(0,t.jsx)(s.Calendar,{size:16}),(0,t.jsx)("span",{children:new Date(e.date).toLocaleDateString("ar-SA")})]}),e.time&&(0,t.jsxs)("div",{className:W.default.metaItem,children:[(0,t.jsx)(o.Clock,{size:16}),(0,t.jsx)("span",{children:e.time})]}),e.location&&(0,t.jsxs)("div",{className:W.default.metaItem,children:[(0,t.jsx)(n.MapPin,{size:16}),(0,t.jsx)("span",{children:e.location})]}),(0,t.jsxs)("div",{className:W.default.metaItem,children:[(0,t.jsx)(f.UserPlus,{size:16}),(0,t.jsxs)("span",{children:[e._count.participations," مشارك"]})]})]}),e.teacher&&(0,t.jsxs)("div",{className:W.default.teacherInfo,children:[(0,t.jsx)("span",{children:"المسؤول:"}),(0,t.jsx)("strong",{children:e.teacher.name})]}),(0,t.jsxs)("div",{className:W.default.cardActions,children:[(0,t.jsxs)(y.default,{href:`/dashboard/activities/${e.id}`,className:W.default.viewButton,children:[(0,t.jsx)(x.Eye,{size:16}),"عرض التفاصيل"]}),!U&&(0,t.jsxs)("button",{className:W.default.deleteButton,onClick:()=>$(e.id,e.title),children:[(0,t.jsx)(j.Trash2,{size:16}),"حذف"]})]})]},e.id)})}),z>1&&(0,t.jsxs)("div",{className:W.default.pagination,children:[(0,t.jsxs)("button",{disabled:1===I,onClick:()=>M(e=>e-1),children:[(0,t.jsx)(_.ChevronRight,{size:18}),"السابق"]}),(0,t.jsxs)("span",{children:["صفحة ",I," من ",z]}),(0,t.jsxs)("button",{disabled:I===z,onClick:()=>M(e=>e+1),children:["التالي",(0,t.jsx)(m.ChevronLeft,{size:18})]})]})]}),A&&(0,t.jsx)(k,{categories:e,teachers:r,onClose:()=>O(!1),onSave:()=>{O(!1),L(),E()}})]})}function k({categories:e,teachers:i,onClose:s,onSave:l}){let[c,d]=(0,a.useState)({title:"",description:"",categoryId:"",teacherId:"",date:new Date().toISOString().split("T")[0],time:"",location:"",maxParticipants:""}),[r,o]=(0,a.useState)(!1),[n,u]=(0,a.useState)(""),h=async e=>{if(e.preventDefault(),!c.title||!c.categoryId||!c.date)return void u("يرجى ملء الحقول المطلوبة");o(!0),u("");try{let e=await fetch("/api/activities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),t=await e.json();if(!e.ok)return void u(t.error||"حدث خطأ");l()}catch{u("حدث خطأ في الاتصال")}finally{o(!1)}};return(0,t.jsx)("div",{className:W.default.modalOverlay,onClick:s,children:(0,t.jsxs)("div",{className:W.default.modal,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:W.default.modalHeader,children:[(0,t.jsx)("h2",{children:"إضافة نشاط جديد"}),(0,t.jsx)("button",{onClick:s,children:(0,t.jsx)(p.X,{size:20})})]}),(0,t.jsxs)("form",{onSubmit:h,className:W.default.modalForm,children:[(0,t.jsxs)("div",{className:W.default.formRow,children:[(0,t.jsxs)("div",{className:W.default.formGroup,children:[(0,t.jsx)("label",{children:"عنوان النشاط *"}),(0,t.jsx)("input",{type:"text",value:c.title,onChange:e=>d({...c,title:e.target.value}),placeholder:"أدخل عنوان النشاط",required:!0})]}),(0,t.jsxs)("div",{className:W.default.formGroup,children:[(0,t.jsx)("label",{children:"الفئة *"}),(0,t.jsxs)("select",{value:c.categoryId,onChange:e=>d({...c,categoryId:e.target.value}),required:!0,children:[(0,t.jsx)("option",{value:"",children:"اختر الفئة"}),e.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:W.default.formGroup,children:[(0,t.jsx)("label",{children:"الوصف"}),(0,t.jsx)("textarea",{value:c.description,onChange:e=>d({...c,description:e.target.value}),rows:3,placeholder:"أدخل وصف النشاط..."})]}),(0,t.jsxs)("div",{className:W.default.formRow,children:[(0,t.jsxs)("div",{className:W.default.formGroup,children:[(0,t.jsx)("label",{children:"التاريخ *"}),(0,t.jsx)("input",{type:"date",value:c.date,onChange:e=>d({...c,date:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:W.default.formGroup,children:[(0,t.jsx)("label",{children:"الوقت"}),(0,t.jsx)("input",{type:"text",value:c.time,onChange:e=>d({...c,time:e.target.value}),placeholder:"مثال: 09:00 صباحاً"})]})]}),(0,t.jsxs)("div",{className:W.default.formRow,children:[(0,t.jsxs)("div",{className:W.default.formGroup,children:[(0,t.jsx)("label",{children:"المكان"}),(0,t.jsx)("input",{type:"text",value:c.location,onChange:e=>d({...c,location:e.target.value}),placeholder:"أدخل مكان النشاط"})]}),(0,t.jsxs)("div",{className:W.default.formGroup,children:[(0,t.jsx)("label",{children:"المدرس المسؤول"}),(0,t.jsxs)("select",{value:c.teacherId,onChange:e=>d({...c,teacherId:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"اختر المدرس"}),i.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:W.default.formGroup,children:[(0,t.jsx)("label",{children:"الحد الأقصى للمشاركين"}),(0,t.jsx)("input",{type:"number",value:c.maxParticipants,onChange:e=>d({...c,maxParticipants:e.target.value}),placeholder:"اترك فارغاً للعدد غير محدود"})]}),n&&(0,t.jsx)("div",{className:W.default.formError,children:n}),(0,t.jsxs)("div",{className:W.default.modalActions,children:[(0,t.jsx)("button",{type:"button",onClick:s,className:W.default.cancelBtn,children:"إلغاء"}),(0,t.jsx)("button",{type:"submit",className:W.default.submitBtn,disabled:r,children:r?"جاري الحفظ...":"حفظ النشاط"})]})]})]})})}e.s(["default",()=>N],2060)}]);