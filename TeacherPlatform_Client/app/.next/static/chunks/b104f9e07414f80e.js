(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";let a=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},63059,e=>{"use strict";let a=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>a],63059)},87130,e=>{"use strict";let a=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>a],87130)},86536,e=>{"use strict";let a=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],86536)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},55436,88511,e=>{"use strict";var a=e.i(75254);let l=(0,a.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>l],55436);let t=(0,a.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},73871,e=>{e.v({actionBtn:"teachers-module__Nflfdq__actionBtn",actionDropdown:"teachers-module__Nflfdq__actionDropdown",actions:"teachers-module__Nflfdq__actions",addButton:"teachers-module__Nflfdq__addButton",avatar:"teachers-module__Nflfdq__avatar",badge:"teachers-module__Nflfdq__badge",badgeError:"teachers-module__Nflfdq__badgeError",badgeGray:"teachers-module__Nflfdq__badgeGray",badgeSuccess:"teachers-module__Nflfdq__badgeSuccess",cancelBtn:"teachers-module__Nflfdq__cancelBtn",clearSearch:"teachers-module__Nflfdq__clearSearch",closeModal:"teachers-module__Nflfdq__closeModal",container:"teachers-module__Nflfdq__container",dropdownItem:"teachers-module__Nflfdq__dropdownItem",dropdownMenu:"teachers-module__Nflfdq__dropdownMenu",empty:"teachers-module__Nflfdq__empty",fadeIn:"teachers-module__Nflfdq__fadeIn",filterGroup:"teachers-module__Nflfdq__filterGroup",filterSelect:"teachers-module__Nflfdq__filterSelect",filters:"teachers-module__Nflfdq__filters",formError:"teachers-module__Nflfdq__formError",formGrid:"teachers-module__Nflfdq__formGrid",formGroup:"teachers-module__Nflfdq__formGroup",header:"teachers-module__Nflfdq__header",loader:"teachers-module__Nflfdq__loader",loading:"teachers-module__Nflfdq__loading",modal:"teachers-module__Nflfdq__modal",modalActions:"teachers-module__Nflfdq__modalActions",modalForm:"teachers-module__Nflfdq__modalForm",modalHeader:"teachers-module__Nflfdq__modalHeader",modalOverlay:"teachers-module__Nflfdq__modalOverlay",noScore:"teachers-module__Nflfdq__noScore",pageBtn:"teachers-module__Nflfdq__pageBtn",pageInfo:"teachers-module__Nflfdq__pageInfo",pagination:"teachers-module__Nflfdq__pagination",score:"teachers-module__Nflfdq__score",scoreHigh:"teachers-module__Nflfdq__scoreHigh",scoreLow:"teachers-module__Nflfdq__scoreLow",scoreMedium:"teachers-module__Nflfdq__scoreMedium",searchBox:"teachers-module__Nflfdq__searchBox",searchIcon:"teachers-module__Nflfdq__searchIcon",searchInput:"teachers-module__Nflfdq__searchInput",slideUp:"teachers-module__Nflfdq__slideUp",spin:"teachers-module__Nflfdq__spin",submitBtn:"teachers-module__Nflfdq__submitBtn",subtitle:"teachers-module__Nflfdq__subtitle",table:"teachers-module__Nflfdq__table",tableCard:"teachers-module__Nflfdq__tableCard",teacherId:"teachers-module__Nflfdq__teacherId",teacherInfo:"teachers-module__Nflfdq__teacherInfo",teacherName:"teachers-module__Nflfdq__teacherName",title:"teachers-module__Nflfdq__title"})},39613,e=>{"use strict";var a=e.i(43476),l=e.i(71645),t=e.i(22016),s=e.i(55436),d=e.i(7233),r=e.i(87130),c=e.i(61911),i=e.i(70273),n=e.i(86536),o=e.i(88511);let u=(0,e.i(75254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var h=e.i(63059),f=e.i(73375),_=e.i(37727),m=e.i(27612),j=e.i(73871);function p(){let[e,p]=(0,l.useState)([]),[N,v]=(0,l.useState)([]),[b,g]=(0,l.useState)([]),[y,q]=(0,l.useState)(!0),[S,k]=(0,l.useState)(null),[C,I]=(0,l.useState)(""),[w,B]=(0,l.useState)(""),[M,G]=(0,l.useState)(""),[z,E]=(0,l.useState)(1),[F,T]=(0,l.useState)(1),[A,H]=(0,l.useState)(!1),[P,$]=(0,l.useState)(null),L=(0,l.useCallback)(async()=>{q(!0);try{let e=new URLSearchParams({page:z.toString(),limit:"10"});C&&e.set("search",C),w&&e.set("status",w),M&&e.set("departmentId",M);let a=await fetch(`/api/teachers?${e}`),l=await a.json();p(l.teachers),T(l.pagination.totalPages)}catch(e){console.error("Failed to fetch teachers:",e)}finally{q(!1)}},[z,C,w,M]),O=async()=>{try{let e=await fetch("/api/departments"),a=await e.json();v(a.departments||[])}catch(e){console.error("Failed to fetch departments:",e)}},U=async()=>{try{let e=await fetch("/api/subjects"),a=await e.json();g(a.subjects||[])}catch(e){console.error("Failed to fetch subjects:",e)}},D=async e=>{if(confirm("هل أنت متأكد من حذف هذا المدرس؟"))try{let a=await fetch(`/api/teachers/${e}`,{method:"DELETE"}),l=await a.json();a.ok?L():alert(l.error||"فشل في حذف المدرس"),k(null)}catch(e){console.error("Failed to delete teacher:",e),alert("حدث خطأ في الحذف"),k(null)}};return(0,l.useEffect)(()=>{L()},[L]),(0,l.useEffect)(()=>{O(),U()},[]),(0,a.jsxs)("div",{className:j.default.container,children:[(0,a.jsxs)("div",{className:j.default.header,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:j.default.title,children:"إدارة المدرسون"}),(0,a.jsx)("p",{className:j.default.subtitle,children:"عرض وإدارة بيانات المدرسون في المنظومة"})]}),(0,a.jsxs)("button",{className:j.default.addButton,onClick:()=>{$(null),H(!0)},children:[(0,a.jsx)(d.Plus,{size:18}),"إضافة مدرس"]})]}),(0,a.jsxs)("div",{className:j.default.filters,children:[(0,a.jsxs)("div",{className:j.default.searchBox,children:[(0,a.jsx)(s.Search,{size:18,className:j.default.searchIcon}),(0,a.jsx)("input",{type:"text",placeholder:"بحث بالاسم أو الرقم الوظيفي...",value:C,onChange:e=>{I(e.target.value),E(1)},className:j.default.searchInput}),C&&(0,a.jsx)("button",{className:j.default.clearSearch,onClick:()=>I(""),children:(0,a.jsx)(_.X,{size:16})})]}),(0,a.jsxs)("div",{className:j.default.filterGroup,children:[(0,a.jsx)(r.Filter,{size:18}),(0,a.jsxs)("select",{value:w,onChange:e=>{B(e.target.value),E(1)},className:j.default.filterSelect,children:[(0,a.jsx)("option",{value:"",children:"جميع الحالات"}),(0,a.jsx)("option",{value:"active",children:"نشط"}),(0,a.jsx)("option",{value:"inactive",children:"غير نشط"}),(0,a.jsx)("option",{value:"suspended",children:"موقوف"})]}),(0,a.jsxs)("select",{value:M,onChange:e=>{G(e.target.value),E(1)},className:j.default.filterSelect,children:[(0,a.jsx)("option",{value:"",children:"جميع الأقسام"}),N.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsx)("div",{className:j.default.tableCard,children:y?(0,a.jsxs)("div",{className:j.default.loading,children:[(0,a.jsx)("div",{className:j.default.loader}),(0,a.jsx)("p",{children:"جاري التحميل..."})]}):0===e.length?(0,a.jsxs)("div",{className:j.default.empty,children:[(0,a.jsx)(c.Users,{size:48}),(0,a.jsx)("h3",{children:"لا يوجد مدرسين"}),(0,a.jsx)("p",{children:"لم يتم العثور على مدرسين بناءً على معايير البحث"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("table",{className:j.default.table,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"المدرس"}),(0,a.jsx)("th",{children:"القسم"}),(0,a.jsx)("th",{children:"المادة"}),(0,a.jsx)("th",{children:"التقييم"}),(0,a.jsx)("th",{children:"الحالة"}),(0,a.jsx)("th",{children:"الإجراءات"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>{var l,s;let d={active:{label:"نشط",class:"badgeSuccess"},inactive:{label:"غير نشط",class:"badgeGray"},suspended:{label:"موقوف",class:"badgeError"}}[l=e.status]||{label:l,class:"badgeGray"};return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:j.default.teacherInfo,children:[(0,a.jsx)("div",{className:j.default.avatar,children:e.name.charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:j.default.teacherName,children:e.name}),(0,a.jsx)("p",{className:j.default.teacherId,children:e.employeeId})]})]})}),(0,a.jsx)("td",{children:e.department?.name||"-"}),(0,a.jsx)("td",{children:e.subject?.name||"-"}),(0,a.jsx)("td",{children:null!==e.avgScore?(0,a.jsxs)("div",{className:`${j.default.score} ${null===(s=e.avgScore)?"":s>=8?j.default.scoreHigh:s>=6?j.default.scoreMedium:j.default.scoreLow}`,children:[(0,a.jsx)(i.Star,{size:14}),e.avgScore]}):(0,a.jsx)("span",{className:j.default.noScore,children:"-"})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:`${j.default.badge} ${j.default[d.class]}`,children:d.label})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:j.default.actions,children:[(0,a.jsx)(t.default,{href:`/dashboard/teachers/${e.id}`,className:j.default.actionBtn,children:(0,a.jsx)(n.Eye,{size:16})}),(0,a.jsx)("button",{className:j.default.actionBtn,onClick:()=>{$(e),H(!0)},children:(0,a.jsx)(o.Edit,{size:16})}),(0,a.jsxs)("div",{className:j.default.actionDropdown,children:[(0,a.jsx)("button",{className:j.default.actionBtn,onClick:()=>k(S===e.id?null:e.id),children:(0,a.jsx)(u,{size:16})}),S===e.id&&(0,a.jsx)("div",{className:j.default.dropdownMenu,children:(0,a.jsxs)("button",{className:j.default.dropdownItem,onClick:()=>D(e.id),children:[(0,a.jsx)(m.Trash2,{size:14}),"حذف المدرس"]})})]})]})})]},e.id)})})]}),(0,a.jsxs)("div",{className:j.default.pagination,children:[(0,a.jsxs)("button",{className:j.default.pageBtn,disabled:1===z,onClick:()=>E(e=>e-1),children:[(0,a.jsx)(h.ChevronRight,{size:18}),"السابق"]}),(0,a.jsxs)("span",{className:j.default.pageInfo,children:["صفحة ",z," من ",F]}),(0,a.jsxs)("button",{className:j.default.pageBtn,disabled:z===F,onClick:()=>E(e=>e+1),children:["التالي",(0,a.jsx)(f.ChevronLeft,{size:18})]})]})]})}),A&&(0,a.jsx)(x,{teacher:P,departments:N,subjects:b,onClose:()=>H(!1),onSave:()=>{H(!1),L()}})]})}function x({teacher:e,departments:t,subjects:s,onClose:d,onSave:r}){let[c,i]=(0,l.useState)({employeeId:e?.employeeId||"",name:e?.name||"",email:e?.email||"",phone:e?.phone||"",departmentId:e?.department?.id?.toString()||"",subjectId:e?.subject?.id?.toString()||"",status:e?.status||"active"}),[n,o]=(0,l.useState)(!1),[u,h]=(0,l.useState)(""),f=async a=>{a.preventDefault(),o(!0),h("");try{let a=e?`/api/teachers/${e.id}`:"/api/teachers",l=e?"PUT":"POST",t=await fetch(a,{method:l,headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),s=await t.json();if(!t.ok)return void h(s.error||"حدث خطأ");r()}catch{h("حدث خطأ في الاتصال")}finally{o(!1)}};return(0,a.jsx)("div",{className:j.default.modalOverlay,onClick:d,children:(0,a.jsxs)("div",{className:j.default.modal,onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:j.default.modalHeader,children:[(0,a.jsx)("h2",{children:e?"تعديل بيانات المدرس":"إضافة مدرس جديد"}),(0,a.jsx)("button",{className:j.default.closeModal,onClick:d,children:(0,a.jsx)(_.X,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:f,className:j.default.modalForm,children:[(0,a.jsxs)("div",{className:j.default.formGrid,children:[(0,a.jsxs)("div",{className:j.default.formGroup,children:[(0,a.jsx)("label",{children:"الرقم الوظيفي *"}),(0,a.jsx)("input",{type:"text",value:c.employeeId,onChange:e=>i({...c,employeeId:e.target.value}),required:!0,disabled:!!e})]}),(0,a.jsxs)("div",{className:j.default.formGroup,children:[(0,a.jsx)("label",{children:"الاسم الكامل *"}),(0,a.jsx)("input",{type:"text",value:c.name,onChange:e=>i({...c,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:j.default.formGroup,children:[(0,a.jsx)("label",{children:"البريد الإلكتروني"}),(0,a.jsx)("input",{type:"email",value:c.email,onChange:e=>i({...c,email:e.target.value})})]}),(0,a.jsxs)("div",{className:j.default.formGroup,children:[(0,a.jsx)("label",{children:"رقم الهاتف"}),(0,a.jsx)("input",{type:"tel",value:c.phone,onChange:e=>i({...c,phone:e.target.value})})]}),(0,a.jsxs)("div",{className:j.default.formGroup,children:[(0,a.jsx)("label",{children:"القسم"}),(0,a.jsxs)("select",{value:c.departmentId,onChange:e=>i({...c,departmentId:e.target.value}),children:[(0,a.jsx)("option",{value:"",children:"اختر القسم"}),t.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:j.default.formGroup,children:[(0,a.jsx)("label",{children:"المادة"}),(0,a.jsxs)("select",{value:c.subjectId,onChange:e=>i({...c,subjectId:e.target.value}),children:[(0,a.jsx)("option",{value:"",children:"اختر المادة"}),s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:j.default.formGroup,children:[(0,a.jsx)("label",{children:"الحالة"}),(0,a.jsxs)("select",{value:c.status,onChange:e=>i({...c,status:e.target.value}),children:[(0,a.jsx)("option",{value:"active",children:"نشط"}),(0,a.jsx)("option",{value:"inactive",children:"غير نشط"}),(0,a.jsx)("option",{value:"suspended",children:"موقوف"})]})]})]}),u&&(0,a.jsx)("div",{className:j.default.formError,children:u}),(0,a.jsxs)("div",{className:j.default.modalActions,children:[(0,a.jsx)("button",{type:"button",className:j.default.cancelBtn,onClick:d,children:"إلغاء"}),(0,a.jsx)("button",{type:"submit",className:j.default.submitBtn,disabled:n,children:n?"جاري الحفظ...":e?"حفظ التعديلات":"إضافة المدرس"})]})]})]})})}e.s(["default",()=>p],39613)}]);