(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3116,i=>{"use strict";let t=(0,i.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);i.s(["Clock",()=>t],3116)},69638,i=>{"use strict";let t=(0,i.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);i.s(["CheckCircle",()=>t],69638)},78894,i=>{"use strict";let t=(0,i.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);i.s(["AlertTriangle",()=>t],78894)},52571,i=>{"use strict";let t=(0,i.i(75254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);i.s(["Info",()=>t],52571)},43531,i=>{"use strict";let t=(0,i.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);i.s(["Check",()=>t],43531)},41659,i=>{i.v({actionBtn:"notifications-module__-yKu1q__actionBtn",actions:"notifications-module__-yKu1q__actions",active:"notifications-module__-yKu1q__active",container:"notifications-module__-yKu1q__container",empty:"notifications-module__-yKu1q__empty",filterBtn:"notifications-module__-yKu1q__filterBtn",filters:"notifications-module__-yKu1q__filters",header:"notifications-module__-yKu1q__header",list:"notifications-module__-yKu1q__list",listCard:"notifications-module__-yKu1q__listCard",loader:"notifications-module__-yKu1q__loader",loading:"notifications-module__-yKu1q__loading",markAllBtn:"notifications-module__-yKu1q__markAllBtn",notificationContent:"notifications-module__-yKu1q__notificationContent",notificationHeader:"notifications-module__-yKu1q__notificationHeader",notificationIcon:"notifications-module__-yKu1q__notificationIcon",notificationItem:"notifications-module__-yKu1q__notificationItem",notificationMessage:"notifications-module__-yKu1q__notificationMessage",notificationTime:"notifications-module__-yKu1q__notificationTime",notificationTitle:"notifications-module__-yKu1q__notificationTitle",spin:"notifications-module__-yKu1q__spin",subtitle:"notifications-module__-yKu1q__subtitle",title:"notifications-module__-yKu1q__title",typeAlert:"notifications-module__-yKu1q__typeAlert",typeInfo:"notifications-module__-yKu1q__typeInfo",typeSuccess:"notifications-module__-yKu1q__typeSuccess",typeWarning:"notifications-module__-yKu1q__typeWarning",unread:"notifications-module__-yKu1q__unread",unreadDot:"notifications-module__-yKu1q__unreadDot"})},27685,i=>{"use strict";var t=i.i(43476),e=i.i(71645),a=i.i(45423),n=i.i(43531);let s=(0,i.i(75254).default)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var l=i.i(3116),o=i.i(78894),c=i.i(52571),d=i.i(69638),u=i.i(41659);function r(){let[i,r]=(0,e.useState)([]),[f,_]=(0,e.useState)(!0),[m,y]=(0,e.useState)("all"),h=(0,e.useCallback)(async()=>{_(!0);try{let i=await fetch("/api/notifications"),t=await i.json();r(t.notifications||[])}catch(i){console.error("Failed to fetch notifications:",i)}finally{_(!1)}},[]);(0,e.useEffect)(()=>{h()},[h]);let p=async i=>{try{await fetch(`/api/notifications/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isRead:!0})}),r(t=>t.map(t=>t.id===i?{...t,isRead:!0}:t))}catch(i){console.error("Failed to mark as read:",i)}},j=async()=>{try{await fetch("/api/notifications/mark-all-read",{method:"POST"}),r(i=>i.map(i=>({...i,isRead:!0})))}catch(i){console.error("Failed to mark all as read:",i)}},k="unread"===m?i.filter(i=>!i.isRead):i,x=i.filter(i=>!i.isRead).length;return(0,t.jsxs)("div",{className:u.default.container,children:[(0,t.jsxs)("div",{className:u.default.header,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:u.default.title,children:"الإشعارات"}),(0,t.jsx)("p",{className:u.default.subtitle,children:x>0?`لديك ${x} إشعارات غير مقروءة`:"جميع الإشعارات مقروءة"})]}),x>0&&(0,t.jsxs)("button",{className:u.default.markAllBtn,onClick:j,children:[(0,t.jsx)(s,{size:18}),"تحديد الكل كمقروء"]})]}),(0,t.jsxs)("div",{className:u.default.filters,children:[(0,t.jsxs)("button",{className:`${u.default.filterBtn} ${"all"===m?u.default.active:""}`,onClick:()=>y("all"),children:["الكل (",i.length,")"]}),(0,t.jsxs)("button",{className:`${u.default.filterBtn} ${"unread"===m?u.default.active:""}`,onClick:()=>y("unread"),children:["غير مقروء (",x,")"]})]}),(0,t.jsx)("div",{className:u.default.listCard,children:f?(0,t.jsxs)("div",{className:u.default.loading,children:[(0,t.jsx)("div",{className:u.default.loader}),(0,t.jsx)("p",{children:"جاري التحميل..."})]}):0===k.length?(0,t.jsxs)("div",{className:u.default.empty,children:[(0,t.jsx)(a.Bell,{size:48}),(0,t.jsx)("h3",{children:"لا توجد إشعارات"}),(0,t.jsx)("p",{children:"ستظهر الإشعارات الجديدة هنا"})]}):(0,t.jsx)("div",{className:u.default.list,children:k.map(i=>(0,t.jsxs)("div",{className:`${u.default.notificationItem} ${!i.isRead?u.default.unread:""}`,onClick:()=>!i.isRead&&p(i.id),children:[(0,t.jsx)("div",{className:`${u.default.notificationIcon} ${u.default[`type${i.type.charAt(0).toUpperCase()+i.type.slice(1)}`]}`,children:(i=>{switch(i){case"success":return(0,t.jsx)(d.CheckCircle,{size:18});case"warning":case"alert":return(0,t.jsx)(o.AlertTriangle,{size:18});default:return(0,t.jsx)(c.Info,{size:18})}})(i.type)}),(0,t.jsxs)("div",{className:u.default.notificationContent,children:[(0,t.jsxs)("div",{className:u.default.notificationHeader,children:[(0,t.jsx)("h3",{className:u.default.notificationTitle,children:i.title}),!i.isRead&&(0,t.jsx)("span",{className:u.default.unreadDot})]}),(0,t.jsx)("p",{className:u.default.notificationMessage,children:i.message}),(0,t.jsxs)("span",{className:u.default.notificationTime,children:[(0,t.jsx)(l.Clock,{size:12}),new Date(i.createdAt).toLocaleString("ar-SA",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]})]}),(0,t.jsx)("div",{className:u.default.actions,children:!i.isRead&&(0,t.jsx)("button",{className:u.default.actionBtn,onClick:t=>{t.stopPropagation(),p(i.id)},title:"تحديد كمقروء",children:(0,t.jsx)(n.Check,{size:16})})})]},i.id))})})]})}i.s(["default",()=>r],27685)}]);