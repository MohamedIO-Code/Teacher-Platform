(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82293,e=>{"use strict";let a=(0,e.i(75254).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["UserCheck",()=>a],82293)},7233,e=>{"use strict";let a=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},63059,e=>{"use strict";let a=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>a],63059)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},55436,88511,e=>{"use strict";var a=e.i(75254);let t=(0,a.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436);let s=(0,a.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>s],88511)},95986,e=>{e.v({actions:"parents-module__iuI-8a__actions",addButton:"parents-module__iuI-8a__addButton",avatar:"parents-module__iuI-8a__avatar",cancelBtn:"parents-module__iuI-8a__cancelBtn",card:"parents-module__iuI-8a__card",cardHeader:"parents-module__iuI-8a__cardHeader",container:"parents-module__iuI-8a__container",deleteBtn:"parents-module__iuI-8a__deleteBtn",editBtn:"parents-module__iuI-8a__editBtn",empty:"parents-module__iuI-8a__empty",filters:"parents-module__iuI-8a__filters",formError:"parents-module__iuI-8a__formError",formGroup:"parents-module__iuI-8a__formGroup",grid:"parents-module__iuI-8a__grid",header:"parents-module__iuI-8a__header",headerContent:"parents-module__iuI-8a__headerContent",headerIcon:"parents-module__iuI-8a__headerIcon",info:"parents-module__iuI-8a__info",listContainer:"parents-module__iuI-8a__listContainer",loader:"parents-module__iuI-8a__loader",loading:"parents-module__iuI-8a__loading",modal:"parents-module__iuI-8a__modal",modalActions:"parents-module__iuI-8a__modalActions",modalForm:"parents-module__iuI-8a__modalForm",modalHeader:"parents-module__iuI-8a__modalHeader",modalOverlay:"parents-module__iuI-8a__modalOverlay",noStudents:"parents-module__iuI-8a__noStudents",pagination:"parents-module__iuI-8a__pagination",searchGroup:"parents-module__iuI-8a__searchGroup",spin:"parents-module__iuI-8a__spin",studentGrade:"parents-module__iuI-8a__studentGrade",studentItem:"parents-module__iuI-8a__studentItem",studentName:"parents-module__iuI-8a__studentName",studentsHeader:"parents-module__iuI-8a__studentsHeader",studentsList:"parents-module__iuI-8a__studentsList",studentsSection:"parents-module__iuI-8a__studentsSection",submitBtn:"parents-module__iuI-8a__submitBtn",subtitle:"parents-module__iuI-8a__subtitle",title:"parents-module__iuI-8a__title"})},68453,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(82293),l=e.i(7233),d=e.i(55436),n=e.i(63059),i=e.i(73375),r=e.i(37727),u=e.i(88511),o=e.i(27612),c=e.i(61911),_=e.i(95986);function m(){let[e,r]=(0,t.useState)([]),[m,p]=(0,t.useState)(!0),[f,j]=(0,t.useState)(""),[x,v]=(0,t.useState)(1),[y,I]=(0,t.useState)(1),[N,g]=(0,t.useState)(!1),[b,k]=(0,t.useState)(null),C=(0,t.useCallback)(async()=>{p(!0);try{let e=new URLSearchParams({page:x.toString(),limit:"15"});f&&e.set("search",f);let a=await fetch(`/api/parents?${e}`),t=await a.json();r(t.parents||[]),I(t.pagination?.totalPages||1)}catch(e){console.error("Failed to fetch parents:",e)}finally{p(!1)}},[x,f]);(0,t.useEffect)(()=>{C()},[C]);let S=async e=>{if(confirm("هل أنت متأكد من حذف ولي الأمر هذا؟"))try{await fetch(`/api/parents/${e}`,{method:"DELETE"}),C()}catch(e){console.error("Failed to delete parent:",e)}};return(0,a.jsxs)("div",{className:_.default.container,children:[(0,a.jsxs)("div",{className:_.default.header,children:[(0,a.jsxs)("div",{className:_.default.headerContent,children:[(0,a.jsx)("div",{className:_.default.headerIcon,children:(0,a.jsx)(s.UserCheck,{size:28})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:_.default.title,children:"أولياء الأمور"}),(0,a.jsx)("p",{className:_.default.subtitle,children:"إدارة حسابات أولياء الأمور"})]})]}),(0,a.jsxs)("button",{className:_.default.addButton,onClick:()=>{k(null),g(!0)},children:[(0,a.jsx)(l.Plus,{size:18}),"إضافة ولي أمر"]})]}),(0,a.jsx)("div",{className:_.default.filters,children:(0,a.jsxs)("div",{className:_.default.searchGroup,children:[(0,a.jsx)(d.Search,{size:18}),(0,a.jsx)("input",{type:"text",placeholder:"بحث بالاسم أو البريد الإلكتروني...",value:f,onChange:e=>{j(e.target.value),v(1)}})]})}),(0,a.jsxs)("div",{className:_.default.listContainer,children:[m?(0,a.jsxs)("div",{className:_.default.loading,children:[(0,a.jsx)("div",{className:_.default.loader}),(0,a.jsx)("p",{children:"جاري التحميل..."})]}):0===e.length?(0,a.jsxs)("div",{className:_.default.empty,children:[(0,a.jsx)(s.UserCheck,{size:48}),(0,a.jsx)("h3",{children:"لا يوجد أولياء أمور"}),(0,a.jsx)("p",{children:"لم يتم إضافة أولياء أمور بعد"})]}):(0,a.jsx)("div",{className:_.default.grid,children:e.map(e=>(0,a.jsxs)("div",{className:_.default.card,children:[(0,a.jsxs)("div",{className:_.default.cardHeader,children:[(0,a.jsx)("div",{className:_.default.avatar,children:e.name.charAt(0)}),(0,a.jsxs)("div",{className:_.default.info,children:[(0,a.jsx)("h3",{children:e.name}),(0,a.jsx)("p",{children:e.email}),e.phone&&(0,a.jsx)("span",{children:e.phone})]}),(0,a.jsxs)("div",{className:_.default.actions,children:[(0,a.jsx)("button",{className:_.default.editBtn,onClick:()=>{k(e),g(!0)},children:(0,a.jsx)(u.Edit,{size:16})}),(0,a.jsx)("button",{className:_.default.deleteBtn,onClick:()=>S(e.id),children:(0,a.jsx)(o.Trash2,{size:16})})]})]}),(0,a.jsxs)("div",{className:_.default.studentsSection,children:[(0,a.jsxs)("div",{className:_.default.studentsHeader,children:[(0,a.jsx)(c.Users,{size:16}),(0,a.jsxs)("span",{children:["الأبناء (",e.students.length,")"]})]}),0===e.students.length?(0,a.jsx)("p",{className:_.default.noStudents,children:"لا يوجد أبناء مسجلين"}):(0,a.jsx)("div",{className:_.default.studentsList,children:e.students.map(e=>(0,a.jsxs)("div",{className:_.default.studentItem,children:[(0,a.jsx)("span",{className:_.default.studentName,children:e.name}),(0,a.jsx)("span",{className:_.default.studentGrade,children:e.grade||e.studentId})]},e.id))})]})]},e.id))}),y>1&&(0,a.jsxs)("div",{className:_.default.pagination,children:[(0,a.jsxs)("button",{disabled:1===x,onClick:()=>v(e=>e-1),children:[(0,a.jsx)(n.ChevronRight,{size:18}),"السابق"]}),(0,a.jsxs)("span",{children:["صفحة ",x," من ",y]}),(0,a.jsxs)("button",{disabled:x===y,onClick:()=>v(e=>e+1),children:["التالي",(0,a.jsx)(i.ChevronLeft,{size:18})]})]})]}),N&&(0,a.jsx)(h,{parent:b,onClose:()=>{g(!1),k(null)},onSave:()=>{g(!1),k(null),C()}})]})}function h({parent:e,onClose:s,onSave:l}){let[d,n]=(0,t.useState)({name:e?.name||"",email:e?.email||"",phone:e?.phone||"",password:""}),[i,u]=(0,t.useState)(!1),[o,c]=(0,t.useState)(""),m=async a=>{if(a.preventDefault(),!d.name||!d.email)return void c("الاسم والبريد الإلكتروني مطلوبان");if(!e&&!d.password)return void c("كلمة المرور مطلوبة للحسابات الجديدة");u(!0),c("");try{let a={...d};!d.password&&e&&delete a.password;let t=await fetch(e?`/api/parents/${e.id}`:"/api/parents",{method:e?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),s=await t.json();if(!t.ok)return void c(s.error||"حدث خطأ");l()}catch{c("حدث خطأ في الاتصال")}finally{u(!1)}};return(0,a.jsx)("div",{className:_.default.modalOverlay,onClick:s,children:(0,a.jsxs)("div",{className:_.default.modal,onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:_.default.modalHeader,children:[(0,a.jsx)("h2",{children:e?"تعديل ولي الأمر":"إضافة ولي أمر جديد"}),(0,a.jsx)("button",{onClick:s,children:(0,a.jsx)(r.X,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:m,className:_.default.modalForm,children:[(0,a.jsxs)("div",{className:_.default.formGroup,children:[(0,a.jsx)("label",{children:"الاسم الكامل *"}),(0,a.jsx)("input",{type:"text",value:d.name,onChange:e=>n({...d,name:e.target.value}),placeholder:"أدخل اسم ولي الأمر",required:!0})]}),(0,a.jsxs)("div",{className:_.default.formGroup,children:[(0,a.jsx)("label",{children:"البريد الإلكتروني *"}),(0,a.jsx)("input",{type:"email",value:d.email,onChange:e=>n({...d,email:e.target.value}),placeholder:"البريد الإلكتروني",required:!0,disabled:!!e})]}),(0,a.jsxs)("div",{className:_.default.formGroup,children:[(0,a.jsx)("label",{children:"رقم الهاتف"}),(0,a.jsx)("input",{type:"tel",value:d.phone,onChange:e=>n({...d,phone:e.target.value}),placeholder:"رقم الهاتف"})]}),(0,a.jsxs)("div",{className:_.default.formGroup,children:[(0,a.jsx)("label",{children:e?"كلمة المرور (اتركها فارغة للإبقاء)":"كلمة المرور *"}),(0,a.jsx)("input",{type:"password",value:d.password,onChange:e=>n({...d,password:e.target.value}),placeholder:"كلمة المرور",required:!e})]}),o&&(0,a.jsx)("div",{className:_.default.formError,children:o}),(0,a.jsxs)("div",{className:_.default.modalActions,children:[(0,a.jsx)("button",{type:"button",onClick:s,className:_.default.cancelBtn,children:"إلغاء"}),(0,a.jsx)("button",{type:"submit",className:_.default.submitBtn,disabled:i,children:i?"جاري الحفظ...":"حفظ"})]})]})]})})}e.s(["default",()=>m])}]);