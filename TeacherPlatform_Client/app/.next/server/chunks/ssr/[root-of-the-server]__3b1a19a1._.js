module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},46842,a=>{"use strict";let b=(0,a.i(70106).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},53722,a=>{"use strict";let b=(0,a.i(70106).default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);a.s(["BookOpen",()=>b],53722)},20005,a=>{"use strict";let b=(0,a.i(70106).default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);a.s(["LogOut",()=>b],20005)},70106,a=>{"use strict";var b=a.i(72131);let c=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:c=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:c,height:c,stroke:a,strokeWidth:g?24*Number(f)/Number(c):f,className:d("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:d(`lucide-${c(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=c(a),g};a.s(["default",()=>g],70106)},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__"},54427,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},41710,a=>{"use strict";let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],41710)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},21374,a=>{"use strict";let b=(0,a.i(70106).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);a.s(["Star",()=>b],21374)},24987,a=>{"use strict";let b=(0,a.i(70106).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},94817,a=>{a.v({activitiesList:"portal-module__B_3J5a__activitiesList",activitiesSection:"portal-module__B_3J5a__activitiesSection",activityCard:"portal-module__B_3J5a__activityCard",activityHeader:"portal-module__B_3J5a__activityHeader",activityMeta:"portal-module__B_3J5a__activityMeta",bigAvatar:"portal-module__B_3J5a__bigAvatar",categoryBadge:"portal-module__B_3J5a__categoryBadge",container:"portal-module__B_3J5a__container",empty:"portal-module__B_3J5a__empty",evalComments:"portal-module__B_3J5a__evalComments",evalHeader:"portal-module__B_3J5a__evalHeader",evalPerformance:"portal-module__B_3J5a__evalPerformance",evalScore:"portal-module__B_3J5a__evalScore",evalStrengths:"portal-module__B_3J5a__evalStrengths",evaluation:"portal-module__B_3J5a__evaluation",formError:"portal-module__B_3J5a__formError",formGroup:"portal-module__B_3J5a__formGroup",header:"portal-module__B_3J5a__header",headerContent:"portal-module__B_3J5a__headerContent",loader:"portal-module__B_3J5a__loader",loading:"portal-module__B_3J5a__loading",loginBtn:"portal-module__B_3J5a__loginBtn",loginCard:"portal-module__B_3J5a__loginCard",loginContainer:"portal-module__B_3J5a__loginContainer",loginForm:"portal-module__B_3J5a__loginForm",loginHeader:"portal-module__B_3J5a__loginHeader",loginIcon:"portal-module__B_3J5a__loginIcon",logoutBtn:"portal-module__B_3J5a__logoutBtn",metaItem:"portal-module__B_3J5a__metaItem",participationInfo:"portal-module__B_3J5a__participationInfo",participationStatus:"portal-module__B_3J5a__participationStatus",pstatusattended:"portal-module__B_3J5a__pstatusattended",pstatuscompleted:"portal-module__B_3J5a__pstatuscompleted",pstatusregistered:"portal-module__B_3J5a__pstatusregistered",roleBadge:"portal-module__B_3J5a__roleBadge",spin:"portal-module__B_3J5a__spin",statCard:"portal-module__B_3J5a__statCard",statLabel:"portal-module__B_3J5a__statLabel",statValue:"portal-module__B_3J5a__statValue",statsCards:"portal-module__B_3J5a__statsCards",statusBadge:"portal-module__B_3J5a__statusBadge",statuscompleted:"portal-module__B_3J5a__statuscompleted",statusongoing:"portal-module__B_3J5a__statusongoing",statusupcoming:"portal-module__B_3J5a__statusupcoming",studentAvatar:"portal-module__B_3J5a__studentAvatar",studentGrade:"portal-module__B_3J5a__studentGrade",studentInfo:"portal-module__B_3J5a__studentInfo",studentInfoCard:"portal-module__B_3J5a__studentInfoCard",studentName:"portal-module__B_3J5a__studentName",studentSelector:"portal-module__B_3J5a__studentSelector",studentTab:"portal-module__B_3J5a__studentTab",studentTabActive:"portal-module__B_3J5a__studentTabActive"})},16042,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(53722),f=a.i(41675),g=a.i(21374),h=a.i(46842),i=a.i(41710),j=a.i(24987);let k=(0,a.i(70106).default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);var l=a.i(20005),m=a.i(94817);function n(){let a=(0,d.useRouter)(),n=(0,d.useSearchParams)(),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)({email:"",password:""}),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(!1),A=(0,c.useCallback)(async()=>{let a=n.get("id");if(!a)return void t(!1);try{let b=await fetch(`/api/parent-portal?parentId=${a}`),c=await b.json();c.parent&&(p(c.parent),c.parent.students.length>0&&r(c.parent.students[0]))}catch(a){console.error("Failed to fetch parent data:",a)}finally{t(!1)}},[n]);(0,c.useEffect)(()=>{A()},[A]);let B=async b=>{b.preventDefault(),x(""),z(!0);try{let b=await fetch("/api/parent-portal/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),c=await b.json();if(!b.ok)return void x(c.error||"بيانات الدخول غير صحيحة");a.push(`/parent-portal?id=${c.parent.id}`)}catch{x("حدث خطأ في الاتصال")}finally{z(!1)}},C=a=>({upcoming:"قادمة",ongoing:"جارية",completed:"منتهية",registered:"مسجل",attended:"حضر"})[a]||a;return s?(0,b.jsxs)("div",{className:m.default.loading,children:[(0,b.jsx)("div",{className:m.default.loader}),(0,b.jsx)("p",{children:"جاري التحميل..."})]}):o?(0,b.jsxs)("div",{className:m.default.container,children:[(0,b.jsxs)("div",{className:m.default.header,children:[(0,b.jsxs)("div",{className:m.default.headerContent,children:[(0,b.jsxs)("h1",{children:["مرحباً، ",o.name]}),(0,b.jsx)("p",{children:"بوابة متابعة أنشطة الأبناء"})]}),(0,b.jsxs)("button",{className:m.default.logoutBtn,onClick:()=>{a.push("/parent-portal"),p(null),r(null)},children:[(0,b.jsx)(l.LogOut,{size:18}),"تسجيل الخروج"]})]}),o.students.length>1&&(0,b.jsx)("div",{className:m.default.studentSelector,children:o.students.map(a=>(0,b.jsxs)("button",{className:`${m.default.studentTab} ${q?.id===a.id?m.default.studentTabActive:""}`,onClick:()=>r(a),children:[(0,b.jsx)("div",{className:m.default.studentAvatar,children:a.name.charAt(0)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:m.default.studentName,children:a.name}),(0,b.jsx)("span",{className:m.default.studentGrade,children:a.grade||a.studentId})]})]},a.id))}),q&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:m.default.studentInfo,children:[(0,b.jsxs)("div",{className:m.default.studentInfoCard,children:[(0,b.jsx)("div",{className:m.default.bigAvatar,children:q.name.charAt(0)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{children:q.name}),(0,b.jsxs)("p",{children:["الرقم الطلابي: ",q.studentId]}),q.grade&&(0,b.jsxs)("span",{children:["الصف: ",q.grade]})]})]}),(0,b.jsxs)("div",{className:m.default.statsCards,children:[(0,b.jsxs)("div",{className:m.default.statCard,children:[(0,b.jsx)(k,{size:24}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:m.default.statValue,children:q.participations.length}),(0,b.jsx)("span",{className:m.default.statLabel,children:"إجمالي المشاركات"})]})]}),(0,b.jsxs)("div",{className:m.default.statCard,children:[(0,b.jsx)(g.Star,{size:24}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:m.default.statValue,children:q.participations.filter(a=>a.evaluations.length>0).length}),(0,b.jsx)("span",{className:m.default.statLabel,children:"مشاركات مقيّمة"})]})]})]})]}),(0,b.jsxs)("div",{className:m.default.activitiesSection,children:[(0,b.jsxs)("h3",{children:[(0,b.jsx)(e.BookOpen,{size:20}),"الأنشطة والمشاركات"]}),0===q.participations.length?(0,b.jsxs)("div",{className:m.default.empty,children:[(0,b.jsx)(e.BookOpen,{size:48}),(0,b.jsx)("h4",{children:"لا توجد مشاركات"}),(0,b.jsx)("p",{children:"لم يتم تسجيل مشاركات بعد"})]}):(0,b.jsx)("div",{className:m.default.activitiesList,children:q.participations.map(a=>(0,b.jsxs)("div",{className:m.default.activityCard,children:[(0,b.jsxs)("div",{className:m.default.activityHeader,children:[(0,b.jsx)("span",{className:m.default.categoryBadge,children:a.activity.category.name}),(0,b.jsx)("span",{className:`${m.default.statusBadge} ${m.default[`status${a.activity.status}`]}`,children:C(a.activity.status)})]}),(0,b.jsx)("h4",{children:a.activity.title}),(0,b.jsxs)("div",{className:m.default.activityMeta,children:[(0,b.jsxs)("div",{className:m.default.metaItem,children:[(0,b.jsx)(f.Calendar,{size:16}),new Date(a.activity.date).toLocaleDateString("ar-SA")]}),a.activity.time&&(0,b.jsxs)("div",{className:m.default.metaItem,children:[(0,b.jsx)(i.Clock,{size:16}),a.activity.time]}),a.activity.location&&(0,b.jsxs)("div",{className:m.default.metaItem,children:[(0,b.jsx)(j.MapPin,{size:16}),a.activity.location]})]}),(0,b.jsxs)("div",{className:m.default.participationInfo,children:[(0,b.jsx)("span",{className:m.default.roleBadge,children:"participant"===a.role?"مشارك":a.role}),(0,b.jsx)("span",{className:`${m.default.participationStatus} ${m.default[`pstatus${a.status}`]}`,children:C(a.status)})]}),a.evaluations.length>0&&(0,b.jsxs)("div",{className:m.default.evaluation,children:[(0,b.jsxs)("div",{className:m.default.evalHeader,children:[(0,b.jsx)(g.Star,{size:18}),(0,b.jsx)("span",{children:"التقييم"}),(0,b.jsxs)("span",{className:m.default.evalScore,children:[a.evaluations[0].score,"/10"]})]}),a.evaluations[0].performance&&(0,b.jsxs)("p",{className:m.default.evalPerformance,children:["الأداء: ",a.evaluations[0].performance]}),a.evaluations[0].strengths&&(0,b.jsxs)("p",{className:m.default.evalStrengths,children:["نقاط القوة: ",a.evaluations[0].strengths]}),a.evaluations[0].comments&&(0,b.jsxs)("p",{className:m.default.evalComments,children:["ملاحظات: ",a.evaluations[0].comments]})]})]},a.id))})]})]})]}):(0,b.jsx)("div",{className:m.default.loginContainer,children:(0,b.jsxs)("div",{className:m.default.loginCard,children:[(0,b.jsxs)("div",{className:m.default.loginHeader,children:[(0,b.jsx)("div",{className:m.default.loginIcon,children:(0,b.jsx)(h.User,{size:32})}),(0,b.jsx)("h1",{children:"بوابة أولياء الأمور"}),(0,b.jsx)("p",{children:"تابع أنشطة ومشاركات أبنائك"})]}),(0,b.jsxs)("form",{onSubmit:B,className:m.default.loginForm,children:[(0,b.jsxs)("div",{className:m.default.formGroup,children:[(0,b.jsx)("label",{children:"البريد الإلكتروني"}),(0,b.jsx)("input",{type:"email",value:u.email,onChange:a=>v({...u,email:a.target.value}),placeholder:"أدخل البريد الإلكتروني",required:!0})]}),(0,b.jsxs)("div",{className:m.default.formGroup,children:[(0,b.jsx)("label",{children:"كلمة المرور"}),(0,b.jsx)("input",{type:"password",value:u.password,onChange:a=>v({...u,password:a.target.value}),placeholder:"أدخل كلمة المرور",required:!0})]}),w&&(0,b.jsx)("div",{className:m.default.formError,children:w}),(0,b.jsx)("button",{type:"submit",className:m.default.loginBtn,disabled:y,children:y?"جاري الدخول...":"تسجيل الدخول"})]})]})})}function o(){return(0,b.jsxs)("div",{className:m.default.loading,children:[(0,b.jsx)("div",{className:m.default.loader}),(0,b.jsx)("p",{children:"جاري التحميل..."})]})}function p(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(o,{}),children:(0,b.jsx)(n,{})})}a.s(["default",()=>p],16042)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3b1a19a1._.js.map