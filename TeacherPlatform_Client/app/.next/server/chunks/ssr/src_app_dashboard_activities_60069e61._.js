module.exports=[85441,a=>{a.v({activitiesGrid:"activities-module__262WTW__activitiesGrid",activitiesList:"activities-module__262WTW__activitiesList",activityCard:"activities-module__262WTW__activityCard",activityDescription:"activities-module__262WTW__activityDescription",activityMeta:"activities-module__262WTW__activityMeta",activityTitle:"activities-module__262WTW__activityTitle",addButton:"activities-module__262WTW__addButton",cancelBtn:"activities-module__262WTW__cancelBtn",cardActions:"activities-module__262WTW__cardActions",cardHeader:"activities-module__262WTW__cardHeader",categoriesGrid:"activities-module__262WTW__categoriesGrid",categoriesSection:"activities-module__262WTW__categoriesSection",categoryBadge:"activities-module__262WTW__categoryBadge",categoryCard:"activities-module__262WTW__categoryCard",categoryIcon:"activities-module__262WTW__categoryIcon",categoryInfo:"activities-module__262WTW__categoryInfo",categorySelected:"activities-module__262WTW__categorySelected",container:"activities-module__262WTW__container",deleteButton:"activities-module__262WTW__deleteButton",empty:"activities-module__262WTW__empty",filterGroup:"activities-module__262WTW__filterGroup",filters:"activities-module__262WTW__filters",formError:"activities-module__262WTW__formError",formGroup:"activities-module__262WTW__formGroup",formRow:"activities-module__262WTW__formRow",header:"activities-module__262WTW__header",headerActions:"activities-module__262WTW__headerActions",headerContent:"activities-module__262WTW__headerContent",headerIcon:"activities-module__262WTW__headerIcon",initButton:"activities-module__262WTW__initButton",loader:"activities-module__262WTW__loader",loading:"activities-module__262WTW__loading",metaItem:"activities-module__262WTW__metaItem",modal:"activities-module__262WTW__modal",modalActions:"activities-module__262WTW__modalActions",modalForm:"activities-module__262WTW__modalForm",modalHeader:"activities-module__262WTW__modalHeader",modalOverlay:"activities-module__262WTW__modalOverlay",pagination:"activities-module__262WTW__pagination",sectionHeader:"activities-module__262WTW__sectionHeader",spin:"activities-module__262WTW__spin",statusBadge:"activities-module__262WTW__statusBadge",statusCancelled:"activities-module__262WTW__statusCancelled",statusCompleted:"activities-module__262WTW__statusCompleted",statusOngoing:"activities-module__262WTW__statusOngoing",statusUpcoming:"activities-module__262WTW__statusUpcoming",submitBtn:"activities-module__262WTW__submitBtn",subtitle:"activities-module__262WTW__subtitle",teacherInfo:"activities-module__262WTW__teacherInfo",title:"activities-module__262WTW__title",viewButton:"activities-module__262WTW__viewButton"})},88185,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(53722),e=a.i(41675),f=a.i(70106);let g=(0,f.default)("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),h=(0,f.default)("feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]);var i=a.i(60246),j=a.i(41710),k=a.i(24987),l=a.i(15618),m=a.i(69012),n=a.i(13749),o=a.i(50522),p=a.i(21374),q=a.i(33508),r=a.i(17371),s=a.i(77156),t=a.i(81560),u=a.i(38246),v=a.i(85441);let w={"يوم اللغة العربية":(0,b.jsx)(d.BookOpen,{size:28}),"يوم المكتبة":(0,b.jsx)(g,{size:28}),"يوم الشعر":(0,b.jsx)(h,{size:28}),"يوم الحقوق الإنسانية":(0,b.jsx)(i.Users,{size:28})},x={"يوم اللغة العربية":"#1e3a5f","يوم المكتبة":"#2d5a8a","يوم الشعر":"#6b4c9a","يوم الحقوق الإنسانية":"#2f855a"};function y(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)([]),[i,q]=(0,c.useState)([]),[y,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(1),[H,I]=(0,c.useState)(1),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(null),N=async()=>{try{let a=await fetch("/api/auth/session"),b=await a.json();b.authenticated&&M(b.user)}catch(a){console.error("Failed to fetch user:",a)}},O=async()=>{try{let a=await fetch("/api/activity-categories"),b=await a.json();f(b.categories||[])}catch(a){console.error("Failed to fetch categories:",a)}},P=(0,c.useCallback)(async()=>{A(!0);try{let a=new URLSearchParams({page:F.toString(),limit:"10"});B&&a.set("categoryId",B.toString()),D&&a.set("status",D);let b=await fetch(`/api/activities?${a}`),c=await b.json();h(c.activities||[]),I(c.pagination?.totalPages||1)}catch(a){console.error("Failed to fetch activities:",a)}finally{A(!1)}},[F,B,D]),Q=async()=>{try{let a=await fetch("/api/teachers?limit=100&status=active"),b=await a.json();q(b.teachers||[])}catch(a){console.error("Failed to fetch teachers:",a)}};(0,c.useEffect)(()=>{O(),Q(),N()},[]);let R=L?.role==="teacher";(0,c.useEffect)(()=>{P()},[P]);let S=async()=>{for(let a of[{name:"يوم اللغة العربية",description:"احتفالية خاصة بيوم اللغة العربية العالمي",icon:"BookOpen",color:"#1e3a5f"},{name:"يوم المكتبة",description:"يوم مخصص لتعزيز ثقافة القراءة",icon:"Library",color:"#2d5a8a"},{name:"يوم الشعر",description:"أمسية شعرية تحتفي بالشعر العربي",icon:"Feather",color:"#6b4c9a"},{name:"يوم الحقوق الإنسانية",description:"فعالية توعوية عن حقوق الإنسان",icon:"Users",color:"#2f855a"}])await fetch("/api/activity-categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});O()},T=async(a,b)=>{if(confirm(`هل أنت متأكد من حذف النشاط "${b}"؟`))try{let b=await fetch(`/api/activities/${a}`,{method:"DELETE"});if(b.ok)P(),O();else{let a=await b.json();alert(a.error||"فشل حذف النشاط")}}catch(a){console.error("Failed to delete activity:",a)}};return(0,b.jsxs)("div",{className:v.default.container,children:[(0,b.jsxs)("div",{className:v.default.header,children:[(0,b.jsxs)("div",{className:v.default.headerContent,children:[(0,b.jsx)("div",{className:v.default.headerIcon,children:(0,b.jsx)(d.BookOpen,{size:32})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:v.default.title,children:"أنشطة اللغة العربية"}),(0,b.jsx)("p",{className:v.default.subtitle,children:"نظام متابعة وتقييم الفعاليات الثقافية واللغوية"})]})]}),(0,b.jsx)("div",{className:v.default.headerActions,children:(0,b.jsxs)("button",{className:v.default.addButton,onClick:()=>K(!0),children:[(0,b.jsx)(l.Plus,{size:18}),"إضافة نشاط"]})})]}),(0,b.jsxs)("div",{className:v.default.categoriesSection,children:[(0,b.jsxs)("div",{className:v.default.sectionHeader,children:[(0,b.jsx)("h2",{children:"فئات الأنشطة"}),0===a.length&&(0,b.jsx)("button",{className:v.default.initButton,onClick:S,children:"تهيئة الفئات الأساسية"})]}),(0,b.jsx)("div",{className:v.default.categoriesGrid,children:a.map(a=>(0,b.jsxs)("button",{className:`${v.default.categoryCard} ${B===a.id?v.default.categorySelected:""}`,onClick:()=>C(B===a.id?null:a.id),style:{"--category-color":x[a.name]||"#1e3a5f"},children:[(0,b.jsx)("div",{className:v.default.categoryIcon,children:w[a.name]||(0,b.jsx)(p.Star,{size:28})}),(0,b.jsxs)("div",{className:v.default.categoryInfo,children:[(0,b.jsx)("h3",{children:a.name}),(0,b.jsxs)("span",{children:[a._count.activities," نشاط"]})]})]},a.id))})]}),(0,b.jsx)("div",{className:v.default.filters,children:(0,b.jsxs)("div",{className:v.default.filterGroup,children:[(0,b.jsx)(m.Filter,{size:18}),(0,b.jsxs)("select",{value:D,onChange:a=>{E(a.target.value),G(1)},children:[(0,b.jsx)("option",{value:"",children:"جميع الحالات"}),(0,b.jsx)("option",{value:"upcoming",children:"قادمة"}),(0,b.jsx)("option",{value:"ongoing",children:"جارية"}),(0,b.jsx)("option",{value:"completed",children:"منتهية"})]})]})}),(0,b.jsxs)("div",{className:v.default.activitiesList,children:[y?(0,b.jsxs)("div",{className:v.default.loading,children:[(0,b.jsx)("div",{className:v.default.loader}),(0,b.jsx)("p",{children:"جاري التحميل..."})]}):0===g.length?(0,b.jsxs)("div",{className:v.default.empty,children:[(0,b.jsx)(d.BookOpen,{size:48}),(0,b.jsx)("h3",{children:"لا توجد أنشطة"}),(0,b.jsx)("p",{children:"لم يتم إضافة أي أنشطة بعد"})]}):(0,b.jsx)("div",{className:v.default.activitiesGrid,children:g.map(a=>{var c;let d;return(0,b.jsxs)("div",{className:v.default.activityCard,children:[(0,b.jsxs)("div",{className:v.default.cardHeader,children:[(0,b.jsx)("span",{className:v.default.categoryBadge,children:a.category.name}),(0,b.jsx)("span",{className:`${v.default.statusBadge} ${(d=a.status,v.default[`status${d.charAt(0).toUpperCase()+d.slice(1)}`])}`,children:{upcoming:"قادمة",ongoing:"جارية",completed:"منتهية",cancelled:"ملغاة"}[c=a.status]||c})]}),(0,b.jsx)("h3",{className:v.default.activityTitle,children:a.title}),a.description&&(0,b.jsx)("p",{className:v.default.activityDescription,children:a.description}),(0,b.jsxs)("div",{className:v.default.activityMeta,children:[(0,b.jsxs)("div",{className:v.default.metaItem,children:[(0,b.jsx)(e.Calendar,{size:16}),(0,b.jsx)("span",{children:new Date(a.date).toLocaleDateString("ar-SA")})]}),a.time&&(0,b.jsxs)("div",{className:v.default.metaItem,children:[(0,b.jsx)(j.Clock,{size:16}),(0,b.jsx)("span",{children:a.time})]}),a.location&&(0,b.jsxs)("div",{className:v.default.metaItem,children:[(0,b.jsx)(k.MapPin,{size:16}),(0,b.jsx)("span",{children:a.location})]}),(0,b.jsxs)("div",{className:v.default.metaItem,children:[(0,b.jsx)(r.UserPlus,{size:16}),(0,b.jsxs)("span",{children:[a._count.participations," مشارك"]})]})]}),a.teacher&&(0,b.jsxs)("div",{className:v.default.teacherInfo,children:[(0,b.jsx)("span",{children:"المسؤول:"}),(0,b.jsx)("strong",{children:a.teacher.name})]}),(0,b.jsxs)("div",{className:v.default.cardActions,children:[(0,b.jsxs)(u.default,{href:`/dashboard/activities/${a.id}`,className:v.default.viewButton,children:[(0,b.jsx)(s.Eye,{size:16}),"عرض التفاصيل"]}),!R&&(0,b.jsxs)("button",{className:v.default.deleteButton,onClick:()=>T(a.id,a.title),children:[(0,b.jsx)(t.Trash2,{size:16}),"حذف"]})]})]},a.id)})}),H>1&&(0,b.jsxs)("div",{className:v.default.pagination,children:[(0,b.jsxs)("button",{disabled:1===F,onClick:()=>G(a=>a-1),children:[(0,b.jsx)(o.ChevronRight,{size:18}),"السابق"]}),(0,b.jsxs)("span",{children:["صفحة ",F," من ",H]}),(0,b.jsxs)("button",{disabled:F===H,onClick:()=>G(a=>a+1),children:["التالي",(0,b.jsx)(n.ChevronLeft,{size:18})]})]})]}),J&&(0,b.jsx)(z,{categories:a,teachers:i,onClose:()=>K(!1),onSave:()=>{K(!1),P(),O()}})]})}function z({categories:a,teachers:d,onClose:e,onSave:f}){let[g,h]=(0,c.useState)({title:"",description:"",categoryId:"",teacherId:"",date:new Date().toISOString().split("T")[0],time:"",location:"",maxParticipants:""}),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(""),m=async a=>{if(a.preventDefault(),!g.title||!g.categoryId||!g.date)return void l("يرجى ملء الحقول المطلوبة");j(!0),l("");try{let a=await fetch("/api/activities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),b=await a.json();if(!a.ok)return void l(b.error||"حدث خطأ");f()}catch{l("حدث خطأ في الاتصال")}finally{j(!1)}};return(0,b.jsx)("div",{className:v.default.modalOverlay,onClick:e,children:(0,b.jsxs)("div",{className:v.default.modal,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:v.default.modalHeader,children:[(0,b.jsx)("h2",{children:"إضافة نشاط جديد"}),(0,b.jsx)("button",{onClick:e,children:(0,b.jsx)(q.X,{size:20})})]}),(0,b.jsxs)("form",{onSubmit:m,className:v.default.modalForm,children:[(0,b.jsxs)("div",{className:v.default.formRow,children:[(0,b.jsxs)("div",{className:v.default.formGroup,children:[(0,b.jsx)("label",{children:"عنوان النشاط *"}),(0,b.jsx)("input",{type:"text",value:g.title,onChange:a=>h({...g,title:a.target.value}),placeholder:"أدخل عنوان النشاط",required:!0})]}),(0,b.jsxs)("div",{className:v.default.formGroup,children:[(0,b.jsx)("label",{children:"الفئة *"}),(0,b.jsxs)("select",{value:g.categoryId,onChange:a=>h({...g,categoryId:a.target.value}),required:!0,children:[(0,b.jsx)("option",{value:"",children:"اختر الفئة"}),a.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:v.default.formGroup,children:[(0,b.jsx)("label",{children:"الوصف"}),(0,b.jsx)("textarea",{value:g.description,onChange:a=>h({...g,description:a.target.value}),rows:3,placeholder:"أدخل وصف النشاط..."})]}),(0,b.jsxs)("div",{className:v.default.formRow,children:[(0,b.jsxs)("div",{className:v.default.formGroup,children:[(0,b.jsx)("label",{children:"التاريخ *"}),(0,b.jsx)("input",{type:"date",value:g.date,onChange:a=>h({...g,date:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:v.default.formGroup,children:[(0,b.jsx)("label",{children:"الوقت"}),(0,b.jsx)("input",{type:"text",value:g.time,onChange:a=>h({...g,time:a.target.value}),placeholder:"مثال: 09:00 صباحاً"})]})]}),(0,b.jsxs)("div",{className:v.default.formRow,children:[(0,b.jsxs)("div",{className:v.default.formGroup,children:[(0,b.jsx)("label",{children:"المكان"}),(0,b.jsx)("input",{type:"text",value:g.location,onChange:a=>h({...g,location:a.target.value}),placeholder:"أدخل مكان النشاط"})]}),(0,b.jsxs)("div",{className:v.default.formGroup,children:[(0,b.jsx)("label",{children:"المدرس المسؤول"}),(0,b.jsxs)("select",{value:g.teacherId,onChange:a=>h({...g,teacherId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"اختر المدرس"}),d.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:v.default.formGroup,children:[(0,b.jsx)("label",{children:"الحد الأقصى للمشاركين"}),(0,b.jsx)("input",{type:"number",value:g.maxParticipants,onChange:a=>h({...g,maxParticipants:a.target.value}),placeholder:"اترك فارغاً للعدد غير محدود"})]}),k&&(0,b.jsx)("div",{className:v.default.formError,children:k}),(0,b.jsxs)("div",{className:v.default.modalActions,children:[(0,b.jsx)("button",{type:"button",onClick:e,className:v.default.cancelBtn,children:"إلغاء"}),(0,b.jsx)("button",{type:"submit",className:v.default.submitBtn,disabled:i,children:i?"جاري الحفظ...":"حفظ النشاط"})]})]})]})})}a.s(["default",()=>y],88185)}];

//# sourceMappingURL=src_app_dashboard_activities_60069e61._.js.map