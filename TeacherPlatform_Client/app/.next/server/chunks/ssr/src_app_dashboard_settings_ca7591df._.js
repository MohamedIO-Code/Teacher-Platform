module.exports=[74918,a=>{a.v({actions:"settings-module___0qqaW__actions",active:"settings-module___0qqaW__active",addBtn:"settings-module___0qqaW__addBtn",badge:"settings-module___0qqaW__badge",badgeGray:"settings-module___0qqaW__badgeGray",badgeGreen:"settings-module___0qqaW__badgeGreen",cancelBtn:"settings-module___0qqaW__cancelBtn",card:"settings-module___0qqaW__card",cardDescription:"settings-module___0qqaW__cardDescription",cardHeader:"settings-module___0qqaW__cardHeader",cardTitle:"settings-module___0qqaW__cardTitle",container:"settings-module___0qqaW__container",content:"settings-module___0qqaW__content",deleteBtn:"settings-module___0qqaW__deleteBtn",editBtn:"settings-module___0qqaW__editBtn",emptyState:"settings-module___0qqaW__emptyState",eyeBtn:"settings-module___0qqaW__eyeBtn",filterSelect:"settings-module___0qqaW__filterSelect",form:"settings-module___0qqaW__form",formError:"settings-module___0qqaW__formError",formGroup:"settings-module___0qqaW__formGroup",formRow:"settings-module___0qqaW__formRow",header:"settings-module___0qqaW__header",headerIcon:"settings-module___0qqaW__headerIcon",input:"settings-module___0qqaW__input",label:"settings-module___0qqaW__label",loader:"settings-module___0qqaW__loader",loadingState:"settings-module___0qqaW__loadingState",modal:"settings-module___0qqaW__modal",modalActions:"settings-module___0qqaW__modalActions",modalForm:"settings-module___0qqaW__modalForm",modalHeader:"settings-module___0qqaW__modalHeader",modalOverlay:"settings-module___0qqaW__modalOverlay",mono:"settings-module___0qqaW__mono",pagination:"settings-module___0qqaW__pagination",passwordInput:"settings-module___0qqaW__passwordInput",saveBtn:"settings-module___0qqaW__saveBtn",searchBox:"settings-module___0qqaW__searchBox",sectionHeader:"settings-module___0qqaW__sectionHeader",select:"settings-module___0qqaW__select",slideUp:"settings-module___0qqaW__slideUp",slider:"settings-module___0qqaW__slider",spin:"settings-module___0qqaW__spin",subTab:"settings-module___0qqaW__subTab",subTabActive:"settings-module___0qqaW__subTabActive",subTabContent:"settings-module___0qqaW__subTabContent",subTabs:"settings-module___0qqaW__subTabs",submitBtn:"settings-module___0qqaW__submitBtn",subtitle:"settings-module___0qqaW__subtitle",tab:"settings-module___0qqaW__tab",tabContent:"settings-module___0qqaW__tabContent",table:"settings-module___0qqaW__table",tableWrap:"settings-module___0qqaW__tableWrap",tabs:"settings-module___0qqaW__tabs",title:"settings-module___0qqaW__title",toast:"settings-module___0qqaW__toast",toggle:"settings-module___0qqaW__toggle",toggleDescription:"settings-module___0qqaW__toggleDescription",toggleItem:"settings-module___0qqaW__toggleItem",toggleList:"settings-module___0qqaW__toggleList",toggleTitle:"settings-module___0qqaW__toggleTitle"})},76010,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(21161),e=a.i(46842),f=a.i(43108),g=a.i(23312),h=a.i(60246),i=a.i(69769),j=a.i(46864),k=a.i(70106);let l=(0,k.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var m=a.i(33441),n=a.i(77156),o=a.i(41379),p=a.i(15618),q=a.i(87532),r=a.i(24569),s=a.i(81560),t=a.i(33508),u=a.i(50522),v=a.i(13749);let w=(0,k.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var x=a.i(74918);function y(){let[a,i]=(0,c.useState)("profile"),[j,k]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)({name:"",email:""}),[y,A]=(0,c.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[B,C]=(0,c.useState)({emailNotifications:!0,browserNotifications:!0,teacherAlerts:!0,attendanceAlerts:!0,weeklyReport:!1});(0,c.useEffect)(()=>{D()},[]);let D=async()=>{try{let a=await fetch("/api/auth/me");if(a.ok){let b=await a.json();w({name:b.user.name||"",email:b.user.email||""})}}catch(a){console.error("Failed to fetch profile:",a)}},E=async()=>{k(!0);try{(await fetch("/api/auth/update-profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).ok&&(q(!0),setTimeout(()=>q(!1),3e3))}catch(a){console.error("Failed to update profile:",a)}finally{k(!1)}},F=async()=>{if(y.newPassword!==y.confirmPassword)return void alert("كلمات المرور غير متطابقة");if(y.newPassword.length<6)return void alert("كلمة المرور يجب أن تكون 6 أحرف على الأقل");k(!0);try{let a=await fetch("/api/auth/change-password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:y.currentPassword,newPassword:y.newPassword})});if(a.ok)q(!0),A({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>q(!1),3e3);else{let b=await a.json();alert(b.error||"فشل تغيير كلمة المرور")}}catch(a){console.error("Failed to change password:",a)}finally{k(!1)}},G=async()=>{k(!0);try{await new Promise(a=>setTimeout(a,500)),q(!0),setTimeout(()=>q(!1),3e3)}finally{k(!1)}},H=[{id:"profile",label:"الملف الشخصي",icon:e.User},{id:"security",label:"الأمان",icon:f.Lock},{id:"notifications",label:"الإشعارات",icon:g.Bell},{id:"users",label:"إدارة المستخدمين",icon:h.Users}];return(0,b.jsxs)("div",{className:x.default.container,children:[(0,b.jsxs)("div",{className:x.default.header,children:[(0,b.jsx)("div",{className:x.default.headerIcon,children:(0,b.jsx)(d.Settings,{size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:x.default.title,children:"الإعدادات"}),(0,b.jsx)("p",{className:x.default.subtitle,children:"إدارة حسابك والمستخدمين"})]})]}),(0,b.jsxs)("div",{className:x.default.content,children:[(0,b.jsx)("div",{className:x.default.tabs,children:H.map(c=>(0,b.jsxs)("button",{className:`${x.default.tab} ${a===c.id?x.default.active:""}`,onClick:()=>i(c.id),children:[(0,b.jsx)(c.icon,{size:18}),c.label]},c.id))}),(0,b.jsxs)("div",{className:x.default.tabContent,children:["profile"===a&&(0,b.jsxs)("div",{className:x.default.card,children:[(0,b.jsx)("h2",{className:x.default.cardTitle,children:"معلومات الملف الشخصي"}),(0,b.jsx)("p",{className:x.default.cardDescription,children:"قم بتحديث معلومات حسابك"}),(0,b.jsxs)("div",{className:x.default.form,children:[(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"الاسم"}),(0,b.jsx)("input",{type:"text",className:x.default.input,value:v.name,onChange:a=>w({...v,name:a.target.value}),placeholder:"أدخل اسمك"})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"البريد الإلكتروني"}),(0,b.jsx)("input",{type:"email",className:x.default.input,value:v.email,onChange:a=>w({...v,email:a.target.value}),placeholder:"أدخل بريدك الإلكتروني",dir:"ltr"})]}),(0,b.jsxs)("button",{className:x.default.saveBtn,onClick:E,disabled:j,children:[p?(0,b.jsx)(m.Check,{size:18}):(0,b.jsx)(l,{size:18}),p?"تم الحفظ":"حفظ التغييرات"]})]})]}),"security"===a&&(0,b.jsxs)("div",{className:x.default.card,children:[(0,b.jsx)("h2",{className:x.default.cardTitle,children:"تغيير كلمة المرور"}),(0,b.jsx)("p",{className:x.default.cardDescription,children:"تأكد من استخدام كلمة مرور قوية"}),(0,b.jsxs)("div",{className:x.default.form,children:[(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"كلمة المرور الحالية"}),(0,b.jsxs)("div",{className:x.default.passwordInput,children:[(0,b.jsx)("input",{type:r?"text":"password",className:x.default.input,value:y.currentPassword,onChange:a=>A({...y,currentPassword:a.target.value}),placeholder:"أدخل كلمة المرور الحالية",dir:"ltr"}),(0,b.jsx)("button",{type:"button",className:x.default.eyeBtn,onClick:()=>s(!r),children:r?(0,b.jsx)(o.EyeOff,{size:18}):(0,b.jsx)(n.Eye,{size:18})})]})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"كلمة المرور الجديدة"}),(0,b.jsxs)("div",{className:x.default.passwordInput,children:[(0,b.jsx)("input",{type:t?"text":"password",className:x.default.input,value:y.newPassword,onChange:a=>A({...y,newPassword:a.target.value}),placeholder:"أدخل كلمة المرور الجديدة",dir:"ltr"}),(0,b.jsx)("button",{type:"button",className:x.default.eyeBtn,onClick:()=>u(!t),children:t?(0,b.jsx)(o.EyeOff,{size:18}):(0,b.jsx)(n.Eye,{size:18})})]})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"تأكيد كلمة المرور الجديدة"}),(0,b.jsx)("input",{type:"password",className:x.default.input,value:y.confirmPassword,onChange:a=>A({...y,confirmPassword:a.target.value}),placeholder:"أعد إدخال كلمة المرور الجديدة",dir:"ltr"})]}),(0,b.jsxs)("button",{className:x.default.saveBtn,onClick:F,disabled:j||!y.currentPassword||!y.newPassword||!y.confirmPassword,children:[p?(0,b.jsx)(m.Check,{size:18}):(0,b.jsx)(f.Lock,{size:18}),p?"تم التغيير":"تغيير كلمة المرور"]})]})]}),"notifications"===a&&(0,b.jsxs)("div",{className:x.default.card,children:[(0,b.jsx)("h2",{className:x.default.cardTitle,children:"إعدادات الإشعارات"}),(0,b.jsx)("p",{className:x.default.cardDescription,children:"تحكم في كيفية تلقي الإشعارات"}),(0,b.jsxs)("div",{className:x.default.toggleList,children:[(0,b.jsxs)("div",{className:x.default.toggleItem,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:x.default.toggleTitle,children:"إشعارات البريد الإلكتروني"}),(0,b.jsx)("p",{className:x.default.toggleDescription,children:"استلام الإشعارات عبر البريد الإلكتروني"})]}),(0,b.jsxs)("label",{className:x.default.toggle,children:[(0,b.jsx)("input",{type:"checkbox",checked:B.emailNotifications,onChange:a=>C({...B,emailNotifications:a.target.checked})}),(0,b.jsx)("span",{className:x.default.slider})]})]}),(0,b.jsxs)("div",{className:x.default.toggleItem,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:x.default.toggleTitle,children:"إشعارات المتصفح"}),(0,b.jsx)("p",{className:x.default.toggleDescription,children:"إشعارات فورية في المتصفح"})]}),(0,b.jsxs)("label",{className:x.default.toggle,children:[(0,b.jsx)("input",{type:"checkbox",checked:B.browserNotifications,onChange:a=>C({...B,browserNotifications:a.target.checked})}),(0,b.jsx)("span",{className:x.default.slider})]})]}),(0,b.jsxs)("div",{className:x.default.toggleItem,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:x.default.toggleTitle,children:"تنبيهات المدرسين"}),(0,b.jsx)("p",{className:x.default.toggleDescription,children:"تلقي تنبيهات عند إضافة أو تحديث بيانات المدرسين"})]}),(0,b.jsxs)("label",{className:x.default.toggle,children:[(0,b.jsx)("input",{type:"checkbox",checked:B.teacherAlerts,onChange:a=>C({...B,teacherAlerts:a.target.checked})}),(0,b.jsx)("span",{className:x.default.slider})]})]}),(0,b.jsxs)("div",{className:x.default.toggleItem,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:x.default.toggleTitle,children:"تنبيهات الحضور"}),(0,b.jsx)("p",{className:x.default.toggleDescription,children:"تلقي تنبيهات عند تسجيل الحضور والغياب"})]}),(0,b.jsxs)("label",{className:x.default.toggle,children:[(0,b.jsx)("input",{type:"checkbox",checked:B.attendanceAlerts,onChange:a=>C({...B,attendanceAlerts:a.target.checked})}),(0,b.jsx)("span",{className:x.default.slider})]})]}),(0,b.jsxs)("div",{className:x.default.toggleItem,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:x.default.toggleTitle,children:"التقرير الأسبوعي"}),(0,b.jsx)("p",{className:x.default.toggleDescription,children:"استلام ملخص أسبوعي عبر البريد الإلكتروني"})]}),(0,b.jsxs)("label",{className:x.default.toggle,children:[(0,b.jsx)("input",{type:"checkbox",checked:B.weeklyReport,onChange:a=>C({...B,weeklyReport:a.target.checked})}),(0,b.jsx)("span",{className:x.default.slider})]})]})]}),(0,b.jsxs)("button",{className:x.default.saveBtn,onClick:G,disabled:j,children:[p?(0,b.jsx)(m.Check,{size:18}):(0,b.jsx)(l,{size:18}),p?"تم الحفظ":"حفظ الإعدادات"]})]}),"users"===a&&(0,b.jsx)(z,{})]})]}),p&&(0,b.jsxs)("div",{className:x.default.toast,children:[(0,b.jsx)(m.Check,{size:18}),"تم حفظ التغييرات بنجاح"]})]})}function z(){let[a,d]=(0,c.useState)("teachers"),e=[{id:"teachers",label:"المدرسون",icon:h.Users},{id:"students",label:"الطلاب",icon:i.GraduationCap},{id:"parents",label:"أولياء الأمور",icon:j.UserCheck},{id:"accounts",label:"حسابات المدرسين",icon:w}];return(0,b.jsxs)("div",{className:x.default.card,children:[(0,b.jsx)("h2",{className:x.default.cardTitle,children:"إدارة المستخدمين"}),(0,b.jsx)("p",{className:x.default.cardDescription,children:"إضافة وتعديل وحذف المستخدمين في النظام"}),(0,b.jsx)("div",{className:x.default.subTabs,children:e.map(c=>(0,b.jsxs)("button",{className:`${x.default.subTab} ${a===c.id?x.default.subTabActive:""}`,onClick:()=>d(c.id),children:[(0,b.jsx)(c.icon,{size:16}),c.label]},c.id))}),(0,b.jsxs)("div",{className:x.default.subTabContent,children:["teachers"===a&&(0,b.jsx)(A,{}),"students"===a&&(0,b.jsx)(C,{}),"parents"===a&&(0,b.jsx)(E,{}),"accounts"===a&&(0,b.jsx)(G,{})]})]})}function A(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0),[g,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(1),[l,m]=(0,c.useState)(1),[n,o]=(0,c.useState)(!1),[t,w]=(0,c.useState)(null),y=(0,c.useCallback)(async()=>{f(!0);try{let a=new URLSearchParams({page:j.toString(),limit:"10"});g&&a.set("search",g);let b=await fetch(`/api/teachers?${a}`),c=await b.json();d(c.teachers||[]),m(c.pagination?.totalPages||1)}catch(a){console.error("Failed to fetch teachers:",a)}finally{f(!1)}},[j,g]);(0,c.useEffect)(()=>{y()},[y]);let z=async a=>{if(confirm("هل أنت متأكد من حذف هذا المدرس؟"))try{await fetch(`/api/teachers/${a}`,{method:"DELETE"}),y()}catch(a){console.error("Failed to delete teacher:",a)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:x.default.sectionHeader,children:[(0,b.jsxs)("div",{className:x.default.searchBox,children:[(0,b.jsx)(q.Search,{size:18}),(0,b.jsx)("input",{type:"text",placeholder:"بحث بالاسم أو الرقم الوظيفي...",value:g,onChange:a=>{i(a.target.value),k(1)}})]}),(0,b.jsxs)("button",{className:x.default.addBtn,onClick:()=>{w(null),o(!0)},children:[(0,b.jsx)(p.Plus,{size:18}),"إضافة مدرس"]})]}),e?(0,b.jsx)("div",{className:x.default.loadingState,children:(0,b.jsx)("div",{className:x.default.loader})}):0===a.length?(0,b.jsxs)("div",{className:x.default.emptyState,children:[(0,b.jsx)(h.Users,{size:40}),(0,b.jsx)("p",{children:"لا يوجد مدرسين"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:x.default.tableWrap,children:(0,b.jsxs)("table",{className:x.default.table,children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"الرقم الوظيفي"}),(0,b.jsx)("th",{children:"الاسم"}),(0,b.jsx)("th",{children:"القسم"}),(0,b.jsx)("th",{children:"الحالة"}),(0,b.jsx)("th",{children:"الإجراءات"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:x.default.mono,children:a.employeeId}),(0,b.jsx)("td",{children:a.name}),(0,b.jsx)("td",{children:a.department?.name||"-"}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:`${x.default.badge} ${"active"===a.status?x.default.badgeGreen:x.default.badgeGray}`,children:"active"===a.status?"نشط":"غير نشط"})}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:x.default.actions,children:[(0,b.jsx)("button",{className:x.default.editBtn,onClick:()=>{w(a),o(!0)},children:(0,b.jsx)(r.Edit,{size:16})}),(0,b.jsx)("button",{className:x.default.deleteBtn,onClick:()=>z(a.id),children:(0,b.jsx)(s.Trash2,{size:16})})]})})]},a.id))})]})}),l>1&&(0,b.jsxs)("div",{className:x.default.pagination,children:[(0,b.jsx)("button",{disabled:1===j,onClick:()=>k(a=>a-1),children:(0,b.jsx)(u.ChevronRight,{size:16})}),(0,b.jsxs)("span",{children:[j," / ",l]}),(0,b.jsx)("button",{disabled:j===l,onClick:()=>k(a=>a+1),children:(0,b.jsx)(v.ChevronLeft,{size:16})})]})]}),n&&(0,b.jsx)(B,{teacher:t,onClose:()=>{o(!1),w(null)},onSave:()=>{o(!1),w(null),y()}})]})}function B({teacher:a,onClose:d,onSave:e}){let[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)({employeeId:a?.employeeId||"",name:a?.name||"",email:a?.email||"",phone:a?.phone||"",departmentId:a?.department?.id?.toString()||"",subjectId:a?.subject?.id?.toString()||"",status:a?.status||"active"}),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)("");(0,c.useEffect)(()=>{fetch("/api/departments").then(a=>a.json()).then(a=>g(a.departments||[])),fetch("/api/subjects").then(a=>a.json()).then(a=>i(a.subjects||[]))},[]);let p=async b=>{if(b.preventDefault(),!j.employeeId||!j.name)return void o("الرقم الوظيفي والاسم مطلوبان");m(!0),o("");try{let b=await fetch(a?`/api/teachers/${a.id}`:"/api/teachers",{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}),c=await b.json();if(!b.ok)return void o(c.error||"حدث خطأ");e()}catch{o("حدث خطأ في الاتصال")}finally{m(!1)}};return(0,b.jsx)("div",{className:x.default.modalOverlay,onClick:d,children:(0,b.jsxs)("div",{className:x.default.modal,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:x.default.modalHeader,children:[(0,b.jsx)("h2",{children:a?"تعديل المدرس":"إضافة مدرس جديد"}),(0,b.jsx)("button",{onClick:d,children:(0,b.jsx)(t.X,{size:20})})]}),(0,b.jsxs)("form",{onSubmit:p,className:x.default.modalForm,children:[(0,b.jsxs)("div",{className:x.default.formRow,children:[(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"الرقم الوظيفي *"}),(0,b.jsx)("input",{type:"text",className:x.default.input,value:j.employeeId,onChange:a=>k({...j,employeeId:a.target.value}),required:!0,disabled:!!a})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"الاسم *"}),(0,b.jsx)("input",{type:"text",className:x.default.input,value:j.name,onChange:a=>k({...j,name:a.target.value}),required:!0})]})]}),(0,b.jsxs)("div",{className:x.default.formRow,children:[(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"البريد الإلكتروني"}),(0,b.jsx)("input",{type:"email",className:x.default.input,value:j.email,onChange:a=>k({...j,email:a.target.value})})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"رقم الهاتف"}),(0,b.jsx)("input",{type:"tel",className:x.default.input,value:j.phone,onChange:a=>k({...j,phone:a.target.value})})]})]}),(0,b.jsxs)("div",{className:x.default.formRow,children:[(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"القسم"}),(0,b.jsxs)("select",{className:x.default.select,value:j.departmentId,onChange:a=>k({...j,departmentId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"اختر القسم"}),f.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"المادة"}),(0,b.jsxs)("select",{className:x.default.select,value:j.subjectId,onChange:a=>k({...j,subjectId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"اختر المادة"}),h.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"الحالة"}),(0,b.jsxs)("select",{className:x.default.select,value:j.status,onChange:a=>k({...j,status:a.target.value}),children:[(0,b.jsx)("option",{value:"active",children:"نشط"}),(0,b.jsx)("option",{value:"inactive",children:"غير نشط"}),(0,b.jsx)("option",{value:"on_leave",children:"إجازة"})]})]}),n&&(0,b.jsx)("div",{className:x.default.formError,children:n}),(0,b.jsxs)("div",{className:x.default.modalActions,children:[(0,b.jsx)("button",{type:"button",onClick:d,className:x.default.cancelBtn,children:"إلغاء"}),(0,b.jsx)("button",{type:"submit",className:x.default.submitBtn,disabled:l,children:l?"جاري الحفظ...":"حفظ"})]})]})]})})}function C(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(1),[n,o]=(0,c.useState)(1),[t,w]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),A=(0,c.useCallback)(async()=>{h(!0);try{let a=new URLSearchParams({page:l.toString(),limit:"10"});j&&a.set("search",j);let b=await fetch(`/api/students?${a}`),c=await b.json();d(c.students||[]),o(c.pagination?.totalPages||1)}catch(a){console.error("Failed to fetch students:",a)}finally{h(!1)}},[l,j]);(0,c.useEffect)(()=>{A()},[A]),(0,c.useEffect)(()=>{fetch("/api/parents?limit=100").then(a=>a.json()).then(a=>f(a.parents||[]))},[]);let B=async a=>{if(confirm("هل أنت متأكد من حذف هذا الطالب؟"))try{let b=await fetch(`/api/students?id=${a}`,{method:"DELETE"});if(b.ok)A();else{let a=await b.json();alert(a.error||"فشل حذف الطالب")}}catch(a){console.error("Failed to delete student:",a)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:x.default.sectionHeader,children:[(0,b.jsxs)("div",{className:x.default.searchBox,children:[(0,b.jsx)(q.Search,{size:18}),(0,b.jsx)("input",{type:"text",placeholder:"بحث بالاسم أو الرقم الطلابي...",value:j,onChange:a=>{k(a.target.value),m(1)}})]}),(0,b.jsxs)("button",{className:x.default.addBtn,onClick:()=>{z(null),w(!0)},children:[(0,b.jsx)(p.Plus,{size:18}),"إضافة طالب"]})]}),g?(0,b.jsx)("div",{className:x.default.loadingState,children:(0,b.jsx)("div",{className:x.default.loader})}):0===a.length?(0,b.jsxs)("div",{className:x.default.emptyState,children:[(0,b.jsx)(i.GraduationCap,{size:40}),(0,b.jsx)("p",{children:"لا يوجد طلاب"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:x.default.tableWrap,children:(0,b.jsxs)("table",{className:x.default.table,children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"الرقم الطلابي"}),(0,b.jsx)("th",{children:"الاسم"}),(0,b.jsx)("th",{children:"الصف"}),(0,b.jsx)("th",{children:"ولي الأمر"}),(0,b.jsx)("th",{children:"الإجراءات"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:x.default.mono,children:a.studentId}),(0,b.jsx)("td",{children:a.name}),(0,b.jsx)("td",{children:a.grade||"-"}),(0,b.jsx)("td",{children:a.parent?.name||"-"}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:x.default.actions,children:[(0,b.jsx)("button",{className:x.default.editBtn,onClick:()=>{z(a),w(!0)},children:(0,b.jsx)(r.Edit,{size:16})}),(0,b.jsx)("button",{className:x.default.deleteBtn,onClick:()=>B(a.id),children:(0,b.jsx)(s.Trash2,{size:16})})]})})]},a.id))})]})}),n>1&&(0,b.jsxs)("div",{className:x.default.pagination,children:[(0,b.jsx)("button",{disabled:1===l,onClick:()=>m(a=>a-1),children:(0,b.jsx)(u.ChevronRight,{size:16})}),(0,b.jsxs)("span",{children:[l," / ",n]}),(0,b.jsx)("button",{disabled:l===n,onClick:()=>m(a=>a+1),children:(0,b.jsx)(v.ChevronLeft,{size:16})})]})]}),t&&(0,b.jsx)(D,{student:y,parents:e,grades:["الأول","الثاني","الثالث","الرابع","الخامس","السادس","السابع","الثامن","التاسع","العاشر","الحادي عشر","الثاني عشر"],onClose:()=>{w(!1),z(null)},onSave:()=>{w(!1),z(null),A()}})]})}function D({student:a,parents:d,grades:e,onClose:f,onSave:g}){let[h,i]=(0,c.useState)({studentId:a?.studentId||"",name:a?.name||"",email:a?.email||"",phone:a?.phone||"",grade:a?.grade||"",parentId:a?.parent?.id?.toString()||""}),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),n=async b=>{if(b.preventDefault(),!h.studentId||!h.name)return void m("الرقم الطلابي والاسم مطلوبان");k(!0),m("");try{let b=a?`/api/students?id=${a.id}`:"/api/students",c=await fetch(b,{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),d=await c.json();if(!c.ok)return void m(d.error||"حدث خطأ");g()}catch{m("حدث خطأ في الاتصال")}finally{k(!1)}};return(0,b.jsx)("div",{className:x.default.modalOverlay,onClick:f,children:(0,b.jsxs)("div",{className:x.default.modal,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:x.default.modalHeader,children:[(0,b.jsx)("h2",{children:a?"تعديل الطالب":"إضافة طالب جديد"}),(0,b.jsx)("button",{onClick:f,children:(0,b.jsx)(t.X,{size:20})})]}),(0,b.jsxs)("form",{onSubmit:n,className:x.default.modalForm,children:[(0,b.jsxs)("div",{className:x.default.formRow,children:[(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"الرقم الطلابي *"}),(0,b.jsx)("input",{type:"text",className:x.default.input,value:h.studentId,onChange:a=>i({...h,studentId:a.target.value}),required:!0,disabled:!!a})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"الاسم *"}),(0,b.jsx)("input",{type:"text",className:x.default.input,value:h.name,onChange:a=>i({...h,name:a.target.value}),required:!0})]})]}),(0,b.jsxs)("div",{className:x.default.formRow,children:[(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"البريد الإلكتروني"}),(0,b.jsx)("input",{type:"email",className:x.default.input,value:h.email,onChange:a=>i({...h,email:a.target.value})})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"رقم الهاتف"}),(0,b.jsx)("input",{type:"tel",className:x.default.input,value:h.phone,onChange:a=>i({...h,phone:a.target.value})})]})]}),(0,b.jsxs)("div",{className:x.default.formRow,children:[(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"الصف"}),(0,b.jsxs)("select",{className:x.default.select,value:h.grade,onChange:a=>i({...h,grade:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"اختر الصف"}),e.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"ولي الأمر"}),(0,b.jsxs)("select",{className:x.default.select,value:h.parentId,onChange:a=>i({...h,parentId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"اختر ولي الأمر"}),d.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]})]}),l&&(0,b.jsx)("div",{className:x.default.formError,children:l}),(0,b.jsxs)("div",{className:x.default.modalActions,children:[(0,b.jsx)("button",{type:"button",onClick:f,className:x.default.cancelBtn,children:"إلغاء"}),(0,b.jsx)("button",{type:"submit",className:x.default.submitBtn,disabled:j,children:j?"جاري الحفظ...":"حفظ"})]})]})]})})}function E(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(""),[i,k]=(0,c.useState)(1),[l,m]=(0,c.useState)(1),[n,o]=(0,c.useState)(!1),[t,w]=(0,c.useState)(null),y=(0,c.useCallback)(async()=>{f(!0);try{let a=new URLSearchParams({page:i.toString(),limit:"10"});g&&a.set("search",g);let b=await fetch(`/api/parents?${a}`),c=await b.json();d(c.parents||[]),m(c.pagination?.totalPages||1)}catch(a){console.error("Failed to fetch parents:",a)}finally{f(!1)}},[i,g]);(0,c.useEffect)(()=>{y()},[y]);let z=async a=>{if(confirm("هل أنت متأكد من حذف ولي الأمر؟"))try{let b=await fetch(`/api/parents?id=${a}`,{method:"DELETE"});if(b.ok)y();else{let a=await b.json();alert(a.error||"فشل حذف ولي الأمر")}}catch(a){console.error("Failed to delete parent:",a)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:x.default.sectionHeader,children:[(0,b.jsxs)("div",{className:x.default.searchBox,children:[(0,b.jsx)(q.Search,{size:18}),(0,b.jsx)("input",{type:"text",placeholder:"بحث بالاسم أو البريد الإلكتروني...",value:g,onChange:a=>{h(a.target.value),k(1)}})]}),(0,b.jsxs)("button",{className:x.default.addBtn,onClick:()=>{w(null),o(!0)},children:[(0,b.jsx)(p.Plus,{size:18}),"إضافة ولي أمر"]})]}),e?(0,b.jsx)("div",{className:x.default.loadingState,children:(0,b.jsx)("div",{className:x.default.loader})}):0===a.length?(0,b.jsxs)("div",{className:x.default.emptyState,children:[(0,b.jsx)(j.UserCheck,{size:40}),(0,b.jsx)("p",{children:"لا يوجد أولياء أمور"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:x.default.tableWrap,children:(0,b.jsxs)("table",{className:x.default.table,children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"الاسم"}),(0,b.jsx)("th",{children:"البريد الإلكتروني"}),(0,b.jsx)("th",{children:"الهاتف"}),(0,b.jsx)("th",{children:"الأبناء"}),(0,b.jsx)("th",{children:"الإجراءات"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:a.name}),(0,b.jsx)("td",{className:x.default.mono,children:a.email}),(0,b.jsx)("td",{children:a.phone||"-"}),(0,b.jsx)("td",{children:(0,b.jsxs)("span",{className:x.default.badge,children:[a.students.length," طالب"]})}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:x.default.actions,children:[(0,b.jsx)("button",{className:x.default.editBtn,onClick:()=>{w(a),o(!0)},children:(0,b.jsx)(r.Edit,{size:16})}),(0,b.jsx)("button",{className:x.default.deleteBtn,onClick:()=>z(a.id),children:(0,b.jsx)(s.Trash2,{size:16})})]})})]},a.id))})]})}),l>1&&(0,b.jsxs)("div",{className:x.default.pagination,children:[(0,b.jsx)("button",{disabled:1===i,onClick:()=>k(a=>a-1),children:(0,b.jsx)(u.ChevronRight,{size:16})}),(0,b.jsxs)("span",{children:[i," / ",l]}),(0,b.jsx)("button",{disabled:i===l,onClick:()=>k(a=>a+1),children:(0,b.jsx)(v.ChevronLeft,{size:16})})]})]}),n&&(0,b.jsx)(F,{parent:t,onClose:()=>{o(!1),w(null)},onSave:()=>{o(!1),w(null),y()}})]})}function F({parent:a,onClose:d,onSave:e}){let[f,g]=(0,c.useState)({name:a?.name||"",email:a?.email||"",phone:a?.phone||"",password:""}),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),l=async b=>{if(b.preventDefault(),!f.name||!f.email)return void k("الاسم والبريد الإلكتروني مطلوبان");if(!a&&!f.password)return void k("كلمة المرور مطلوبة");i(!0),k("");let c={...f};!f.password&&a&&delete c.password;try{let b=a?`/api/parents?id=${a.id}`:"/api/parents",d=await fetch(b,{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),f=await d.json();if(!d.ok)return void k(f.error||"حدث خطأ");e()}catch{k("حدث خطأ في الاتصال")}finally{i(!1)}};return(0,b.jsx)("div",{className:x.default.modalOverlay,onClick:d,children:(0,b.jsxs)("div",{className:x.default.modal,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:x.default.modalHeader,children:[(0,b.jsx)("h2",{children:a?"تعديل ولي الأمر":"إضافة ولي أمر جديد"}),(0,b.jsx)("button",{onClick:d,children:(0,b.jsx)(t.X,{size:20})})]}),(0,b.jsxs)("form",{onSubmit:l,className:x.default.modalForm,children:[(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"الاسم *"}),(0,b.jsx)("input",{type:"text",className:x.default.input,value:f.name,onChange:a=>g({...f,name:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"البريد الإلكتروني *"}),(0,b.jsx)("input",{type:"email",className:x.default.input,value:f.email,onChange:a=>g({...f,email:a.target.value}),required:!0,disabled:!!a})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"رقم الهاتف"}),(0,b.jsx)("input",{type:"tel",className:x.default.input,value:f.phone,onChange:a=>g({...f,phone:a.target.value})})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:a?"كلمة المرور (اتركها فارغة للإبقاء)":"كلمة المرور *"}),(0,b.jsx)("input",{type:"password",className:x.default.input,value:f.password,onChange:a=>g({...f,password:a.target.value}),required:!a})]}),j&&(0,b.jsx)("div",{className:x.default.formError,children:j}),(0,b.jsxs)("div",{className:x.default.modalActions,children:[(0,b.jsx)("button",{type:"button",onClick:d,className:x.default.cancelBtn,children:"إلغاء"}),(0,b.jsx)("button",{type:"submit",className:x.default.submitBtn,disabled:h,children:h?"جاري الحفظ...":"حفظ"})]})]})]})})}function G(){let[a,d]=(0,c.useState)([]),[e,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)("all"),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),t=(0,c.useCallback)(async()=>{g(!0);try{let a=new URLSearchParams;"with"===j&&a.set("hasAccount","true"),"without"===j&&a.set("hasAccount","false");let b=await fetch(`/api/teachers/accounts?${a}`),c=await b.json();d(c.teachers||[])}catch(a){console.error("Failed to fetch teacher accounts:",a)}finally{g(!1)}},[j]);(0,c.useEffect)(()=>{t()},[t]);let u=a.filter(a=>a.name.includes(h)||a.employeeId.includes(h));return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:x.default.sectionHeader,children:[(0,b.jsxs)("div",{className:x.default.searchBox,children:[(0,b.jsx)(q.Search,{size:18}),(0,b.jsx)("input",{type:"text",placeholder:"بحث بالاسم أو الرقم الوظيفي...",value:h,onChange:a=>i(a.target.value)})]}),(0,b.jsxs)("select",{className:x.default.filterSelect,value:j,onChange:a=>k(a.target.value),children:[(0,b.jsx)("option",{value:"all",children:"جميع المدرسين"}),(0,b.jsx)("option",{value:"with",children:"لديهم حساب"}),(0,b.jsx)("option",{value:"without",children:"بدون حساب"})]})]}),e?(0,b.jsx)("div",{className:x.default.loadingState,children:(0,b.jsx)("div",{className:x.default.loader})}):0===u.length?(0,b.jsxs)("div",{className:x.default.emptyState,children:[(0,b.jsx)(w,{size:40}),(0,b.jsx)("p",{children:"لا يوجد مدرسين"})]}):(0,b.jsx)("div",{className:x.default.tableWrap,children:(0,b.jsxs)("table",{className:x.default.table,children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"الرقم الوظيفي"}),(0,b.jsx)("th",{children:"الاسم"}),(0,b.jsx)("th",{children:"القسم"}),(0,b.jsx)("th",{children:"حالة الحساب"}),(0,b.jsx)("th",{children:"البريد الإلكتروني"}),(0,b.jsx)("th",{children:"الإجراءات"})]})}),(0,b.jsx)("tbody",{children:u.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:x.default.mono,children:a.employeeId}),(0,b.jsx)("td",{children:a.name}),(0,b.jsx)("td",{children:a.department||"-"}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:`${x.default.badge} ${a.hasAccount?x.default.badgeGreen:x.default.badgeGray}`,children:a.hasAccount?"لديه حساب":"بدون حساب"})}),(0,b.jsx)("td",{dir:"ltr",children:a.accountEmail||"-"}),(0,b.jsx)("td",{children:(0,b.jsx)("div",{className:x.default.actions,children:a.hasAccount?(0,b.jsx)("button",{className:x.default.editBtn,onClick:()=>{s(a),o(!0)},title:"إعادة تعيين كلمة المرور",children:(0,b.jsx)(f.Lock,{size:16})}):(0,b.jsxs)("button",{className:x.default.addBtn,onClick:()=>{s(a),m(!0)},style:{padding:"0.4rem 0.8rem",fontSize:"0.8rem"},children:[(0,b.jsx)(p.Plus,{size:14}),"إنشاء حساب"]})})})]},a.id))})]})}),l&&r&&(0,b.jsx)(H,{teacher:r,onClose:()=>{m(!1),s(null)},onSave:()=>{m(!1),s(null),t()}}),n&&r&&(0,b.jsx)(I,{teacher:r,onClose:()=>{o(!1),s(null)},onSave:()=>{o(!1),s(null)}})]})}function H({teacher:a,onClose:d,onSave:e}){let[f,g]=(0,c.useState)({email:a.email||"",password:"",confirmPassword:""}),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1),p=async b=>{if(b.preventDefault(),!f.email||!f.password)return void k("البريد الإلكتروني وكلمة المرور مطلوبين");if(f.password!==f.confirmPassword)return void k("كلمات المرور غير متطابقة");if(f.password.length<8)return void k("كلمة المرور يجب أن تكون 8 أحرف على الأقل");i(!0),k("");try{let b=await fetch("/api/teachers/accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacherId:a.id,email:f.email,password:f.password,name:a.name})}),c=await b.json();if(!b.ok)return void k(c.error||"حدث خطأ في إنشاء الحساب");alert("تم إنشاء حساب المدرس بنجاح"),e()}catch{k("حدث خطأ في الاتصال")}finally{i(!1)}};return(0,b.jsx)("div",{className:x.default.modalOverlay,onClick:d,children:(0,b.jsxs)("div",{className:x.default.modal,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:x.default.modalHeader,children:[(0,b.jsxs)("h2",{children:["إنشاء حساب للمدرس: ",a.name]}),(0,b.jsx)("button",{onClick:d,children:(0,b.jsx)(t.X,{size:20})})]}),(0,b.jsxs)("form",{onSubmit:p,className:x.default.modalForm,children:[(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"البريد الإلكتروني *"}),(0,b.jsx)("input",{type:"email",className:x.default.input,value:f.email,onChange:a=>g({...f,email:a.target.value}),required:!0,dir:"ltr"})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"كلمة المرور *"}),(0,b.jsxs)("div",{className:x.default.passwordInput,children:[(0,b.jsx)("input",{type:l?"text":"password",className:x.default.input,value:f.password,onChange:a=>g({...f,password:a.target.value}),required:!0,dir:"ltr",placeholder:"8 أحرف على الأقل"}),(0,b.jsx)("button",{type:"button",className:x.default.eyeBtn,onClick:()=>m(!l),children:l?(0,b.jsx)(o.EyeOff,{size:18}):(0,b.jsx)(n.Eye,{size:18})})]})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"تأكيد كلمة المرور *"}),(0,b.jsx)("input",{type:"password",className:x.default.input,value:f.confirmPassword,onChange:a=>g({...f,confirmPassword:a.target.value}),required:!0,dir:"ltr"})]}),j&&(0,b.jsx)("div",{className:x.default.formError,children:j}),(0,b.jsxs)("div",{className:x.default.modalActions,children:[(0,b.jsx)("button",{type:"button",onClick:d,className:x.default.cancelBtn,children:"إلغاء"}),(0,b.jsx)("button",{type:"submit",className:x.default.submitBtn,disabled:h,children:h?"جاري الإنشاء...":"إنشاء الحساب"})]})]})]})})}function I({teacher:a,onClose:d,onSave:e}){let[f,g]=(0,c.useState)({password:"",confirmPassword:""}),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1),p=async b=>{if(b.preventDefault(),f.password!==f.confirmPassword)return void k("كلمات المرور غير متطابقة");if(f.password.length<8)return void k("كلمة المرور يجب أن تكون 8 أحرف على الأقل");i(!0),k("");try{let b=await fetch("/api/teachers/accounts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacherId:a.id,newPassword:f.password})}),c=await b.json();if(!b.ok)return void k(c.error||"حدث خطأ");alert("تم تحديث كلمة المرور بنجاح"),e()}catch{k("حدث خطأ في الاتصال")}finally{i(!1)}};return(0,b.jsx)("div",{className:x.default.modalOverlay,onClick:d,children:(0,b.jsxs)("div",{className:x.default.modal,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:x.default.modalHeader,children:[(0,b.jsxs)("h2",{children:["إعادة تعيين كلمة المرور: ",a.name]}),(0,b.jsx)("button",{onClick:d,children:(0,b.jsx)(t.X,{size:20})})]}),(0,b.jsxs)("form",{onSubmit:p,className:x.default.modalForm,children:[(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"كلمة المرور الجديدة *"}),(0,b.jsxs)("div",{className:x.default.passwordInput,children:[(0,b.jsx)("input",{type:l?"text":"password",className:x.default.input,value:f.password,onChange:a=>g({...f,password:a.target.value}),required:!0,dir:"ltr",placeholder:"8 أحرف على الأقل"}),(0,b.jsx)("button",{type:"button",className:x.default.eyeBtn,onClick:()=>m(!l),children:l?(0,b.jsx)(o.EyeOff,{size:18}):(0,b.jsx)(n.Eye,{size:18})})]})]}),(0,b.jsxs)("div",{className:x.default.formGroup,children:[(0,b.jsx)("label",{className:x.default.label,children:"تأكيد كلمة المرور *"}),(0,b.jsx)("input",{type:"password",className:x.default.input,value:f.confirmPassword,onChange:a=>g({...f,confirmPassword:a.target.value}),required:!0,dir:"ltr"})]}),j&&(0,b.jsx)("div",{className:x.default.formError,children:j}),(0,b.jsxs)("div",{className:x.default.modalActions,children:[(0,b.jsx)("button",{type:"button",onClick:d,className:x.default.cancelBtn,children:"إلغاء"}),(0,b.jsx)("button",{type:"submit",className:x.default.submitBtn,disabled:h,children:h?"جاري التحديث...":"تحديث كلمة المرور"})]})]})]})})}a.s(["default",()=>y],76010)}];

//# sourceMappingURL=src_app_dashboard_settings_ca7591df._.js.map