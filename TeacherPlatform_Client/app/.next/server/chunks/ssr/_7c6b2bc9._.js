module.exports=[15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},50522,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["ChevronRight",()=>b],50522)},69012,a=>{"use strict";let b=(0,a.i(70106).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);a.s(["Filter",()=>b],69012)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},87532,24569,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>c],87532);let d=(0,b.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>d],24569)},69769,a=>{"use strict";let b=(0,a.i(70106).default)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);a.s(["GraduationCap",()=>b],69769)},79278,a=>{a.v({actions:"students-module__rxau4q__actions",addButton:"students-module__rxau4q__addButton",avatar:"students-module__rxau4q__avatar",cancelBtn:"students-module__rxau4q__cancelBtn",container:"students-module__rxau4q__container",deleteBtn:"students-module__rxau4q__deleteBtn",editBtn:"students-module__rxau4q__editBtn",email:"students-module__rxau4q__email",empty:"students-module__rxau4q__empty",filterGroup:"students-module__rxau4q__filterGroup",filters:"students-module__rxau4q__filters",formError:"students-module__rxau4q__formError",formGroup:"students-module__rxau4q__formGroup",formRow:"students-module__rxau4q__formRow",header:"students-module__rxau4q__header",headerContent:"students-module__rxau4q__headerContent",headerIcon:"students-module__rxau4q__headerIcon",loader:"students-module__rxau4q__loader",loading:"students-module__rxau4q__loading",modal:"students-module__rxau4q__modal",modalActions:"students-module__rxau4q__modalActions",modalForm:"students-module__rxau4q__modalForm",modalHeader:"students-module__rxau4q__modalHeader",modalOverlay:"students-module__rxau4q__modalOverlay",name:"students-module__rxau4q__name",nameCell:"students-module__rxau4q__nameCell",pagination:"students-module__rxau4q__pagination",participationBadge:"students-module__rxau4q__participationBadge",searchGroup:"students-module__rxau4q__searchGroup",spin:"students-module__rxau4q__spin",studentId:"students-module__rxau4q__studentId",submitBtn:"students-module__rxau4q__submitBtn",subtitle:"students-module__rxau4q__subtitle",table:"students-module__rxau4q__table",tableContainer:"students-module__rxau4q__tableContainer",title:"students-module__rxau4q__title"})},88516,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(69769),e=a.i(15618),f=a.i(87532),g=a.i(69012),h=a.i(50522),i=a.i(13749),j=a.i(33508),k=a.i(24569),l=a.i(81560),m=a.i(79278);function n(){let[a,j]=(0,c.useState)([]),[n,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(1),[y,z]=(0,c.useState)(1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),E=(0,c.useCallback)(async()=>{r(!0);try{let a=new URLSearchParams({page:w.toString(),limit:"15"});s&&a.set("search",s),u&&a.set("grade",u);let b=await fetch(`/api/students?${a}`),c=await b.json();j(c.students||[]),z(c.pagination?.totalPages||1)}catch(a){console.error("Failed to fetch students:",a)}finally{r(!1)}},[w,s,u]),F=async()=>{try{let a=await fetch("/api/parents?limit=100"),b=await a.json();p(b.parents||[])}catch(a){console.error("Failed to fetch parents:",a)}};(0,c.useEffect)(()=>{E()},[E]),(0,c.useEffect)(()=>{F()},[]);let G=async a=>{if(confirm("هل أنت متأكد من حذف هذا الطالب؟"))try{await fetch(`/api/students/${a}`,{method:"DELETE"}),E()}catch(a){console.error("Failed to delete student:",a)}},H=["الأول","الثاني","الثالث","الرابع","الخامس","السادس","السابع","الثامن","التاسع","العاشر","الحادي عشر","الثاني عشر"];return(0,b.jsxs)("div",{className:m.default.container,children:[(0,b.jsxs)("div",{className:m.default.header,children:[(0,b.jsxs)("div",{className:m.default.headerContent,children:[(0,b.jsx)("div",{className:m.default.headerIcon,children:(0,b.jsx)(d.GraduationCap,{size:28})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:m.default.title,children:"إدارة الطلاب"}),(0,b.jsx)("p",{className:m.default.subtitle,children:"إضافة ومتابعة بيانات الطلاب"})]})]}),(0,b.jsxs)("button",{className:m.default.addButton,onClick:()=>{D(null),B(!0)},children:[(0,b.jsx)(e.Plus,{size:18}),"إضافة طالب"]})]}),(0,b.jsxs)("div",{className:m.default.filters,children:[(0,b.jsxs)("div",{className:m.default.searchGroup,children:[(0,b.jsx)(f.Search,{size:18}),(0,b.jsx)("input",{type:"text",placeholder:"بحث بالاسم أو الرقم الطلابي...",value:s,onChange:a=>{t(a.target.value),x(1)}})]}),(0,b.jsxs)("div",{className:m.default.filterGroup,children:[(0,b.jsx)(g.Filter,{size:18}),(0,b.jsxs)("select",{value:u,onChange:a=>{v(a.target.value),x(1)},children:[(0,b.jsx)("option",{value:"",children:"جميع الصفوف"}),H.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{className:m.default.tableContainer,children:[q?(0,b.jsxs)("div",{className:m.default.loading,children:[(0,b.jsx)("div",{className:m.default.loader}),(0,b.jsx)("p",{children:"جاري التحميل..."})]}):0===a.length?(0,b.jsxs)("div",{className:m.default.empty,children:[(0,b.jsx)(d.GraduationCap,{size:48}),(0,b.jsx)("h3",{children:"لا يوجد طلاب"}),(0,b.jsx)("p",{children:"لم يتم إضافة طلاب بعد"})]}):(0,b.jsxs)("table",{className:m.default.table,children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"الرقم الطلابي"}),(0,b.jsx)("th",{children:"الاسم"}),(0,b.jsx)("th",{children:"الصف"}),(0,b.jsx)("th",{children:"ولي الأمر"}),(0,b.jsx)("th",{children:"المشاركات"}),(0,b.jsx)("th",{children:"الإجراءات"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:m.default.studentId,children:a.studentId}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:m.default.nameCell,children:[(0,b.jsx)("div",{className:m.default.avatar,children:a.name.charAt(0)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:m.default.name,children:a.name}),a.email&&(0,b.jsx)("span",{className:m.default.email,children:a.email})]})]})}),(0,b.jsx)("td",{children:a.grade||"-"}),(0,b.jsx)("td",{children:a.parent?.name||"-"}),(0,b.jsx)("td",{children:(0,b.jsxs)("span",{className:m.default.participationBadge,children:[a._count.participations," نشاط"]})}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:m.default.actions,children:[(0,b.jsx)("button",{className:m.default.editBtn,onClick:()=>{D(a),B(!0)},children:(0,b.jsx)(k.Edit,{size:16})}),(0,b.jsx)("button",{className:m.default.deleteBtn,onClick:()=>G(a.id),children:(0,b.jsx)(l.Trash2,{size:16})})]})})]},a.id))})]}),y>1&&(0,b.jsxs)("div",{className:m.default.pagination,children:[(0,b.jsxs)("button",{disabled:1===w,onClick:()=>x(a=>a-1),children:[(0,b.jsx)(h.ChevronRight,{size:18}),"السابق"]}),(0,b.jsxs)("span",{children:["صفحة ",w," من ",y]}),(0,b.jsxs)("button",{disabled:w===y,onClick:()=>x(a=>a+1),children:["التالي",(0,b.jsx)(i.ChevronLeft,{size:18})]})]})]}),A&&(0,b.jsx)(o,{student:C,parents:n,grades:H,onClose:()=>{B(!1),D(null)},onSave:()=>{B(!1),D(null),E()}})]})}function o({student:a,parents:d,grades:e,onClose:f,onSave:g}){let[h,i]=(0,c.useState)({studentId:a?.studentId||"",name:a?.name||"",email:a?.email||"",phone:a?.phone||"",grade:a?.grade||"",parentId:a?.parent?.id?.toString()||""}),[k,l]=(0,c.useState)(!1),[n,o]=(0,c.useState)(""),p=async b=>{if(b.preventDefault(),!h.studentId||!h.name)return void o("الرقم الطلابي والاسم مطلوبان");l(!0),o("");try{let b=await fetch(a?`/api/students/${a.id}`:"/api/students",{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),c=await b.json();if(!b.ok)return void o(c.error||"حدث خطأ");g()}catch{o("حدث خطأ في الاتصال")}finally{l(!1)}};return(0,b.jsx)("div",{className:m.default.modalOverlay,onClick:f,children:(0,b.jsxs)("div",{className:m.default.modal,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:m.default.modalHeader,children:[(0,b.jsx)("h2",{children:a?"تعديل الطالب":"إضافة طالب جديد"}),(0,b.jsx)("button",{onClick:f,children:(0,b.jsx)(j.X,{size:20})})]}),(0,b.jsxs)("form",{onSubmit:p,className:m.default.modalForm,children:[(0,b.jsxs)("div",{className:m.default.formRow,children:[(0,b.jsxs)("div",{className:m.default.formGroup,children:[(0,b.jsx)("label",{children:"الرقم الطلابي *"}),(0,b.jsx)("input",{type:"text",value:h.studentId,onChange:a=>i({...h,studentId:a.target.value}),placeholder:"أدخل الرقم الطلابي",required:!0,disabled:!!a})]}),(0,b.jsxs)("div",{className:m.default.formGroup,children:[(0,b.jsx)("label",{children:"الاسم الكامل *"}),(0,b.jsx)("input",{type:"text",value:h.name,onChange:a=>i({...h,name:a.target.value}),placeholder:"أدخل اسم الطالب",required:!0})]})]}),(0,b.jsxs)("div",{className:m.default.formRow,children:[(0,b.jsxs)("div",{className:m.default.formGroup,children:[(0,b.jsx)("label",{children:"البريد الإلكتروني"}),(0,b.jsx)("input",{type:"email",value:h.email,onChange:a=>i({...h,email:a.target.value}),placeholder:"البريد الإلكتروني"})]}),(0,b.jsxs)("div",{className:m.default.formGroup,children:[(0,b.jsx)("label",{children:"رقم الهاتف"}),(0,b.jsx)("input",{type:"tel",value:h.phone,onChange:a=>i({...h,phone:a.target.value}),placeholder:"رقم الهاتف"})]})]}),(0,b.jsxs)("div",{className:m.default.formRow,children:[(0,b.jsxs)("div",{className:m.default.formGroup,children:[(0,b.jsx)("label",{children:"الصف الدراسي"}),(0,b.jsxs)("select",{value:h.grade,onChange:a=>i({...h,grade:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"اختر الصف"}),e.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:m.default.formGroup,children:[(0,b.jsx)("label",{children:"ولي الأمر"}),(0,b.jsxs)("select",{value:h.parentId,onChange:a=>i({...h,parentId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"اختر ولي الأمر"}),d.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]})]}),n&&(0,b.jsx)("div",{className:m.default.formError,children:n}),(0,b.jsxs)("div",{className:m.default.modalActions,children:[(0,b.jsx)("button",{type:"button",onClick:f,className:m.default.cancelBtn,children:"إلغاء"}),(0,b.jsx)("button",{type:"submit",className:m.default.submitBtn,disabled:k,children:k?"جاري الحفظ...":"حفظ"})]})]})]})})}a.s(["default",()=>n])}];

//# sourceMappingURL=_7c6b2bc9._.js.map