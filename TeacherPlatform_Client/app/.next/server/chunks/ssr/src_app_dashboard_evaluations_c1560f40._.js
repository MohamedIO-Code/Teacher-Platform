module.exports=[51300,a=>{a.v({addButton:"evaluations-module__QgHSaa__addButton",avatar:"evaluations-module__QgHSaa__avatar",cancelBtn:"evaluations-module__QgHSaa__cancelBtn",card:"evaluations-module__QgHSaa__card",cardFooter:"evaluations-module__QgHSaa__cardFooter",cardHeader:"evaluations-module__QgHSaa__cardHeader",closeModal:"evaluations-module__QgHSaa__closeModal",comments:"evaluations-module__QgHSaa__comments",container:"evaluations-module__QgHSaa__container",date:"evaluations-module__QgHSaa__date",empty:"evaluations-module__QgHSaa__empty",evaluator:"evaluations-module__QgHSaa__evaluator",filterGroup:"evaluations-module__QgHSaa__filterGroup",filterSelect:"evaluations-module__QgHSaa__filterSelect",filters:"evaluations-module__QgHSaa__filters",formError:"evaluations-module__QgHSaa__formError",formGroup:"evaluations-module__QgHSaa__formGroup",formRow:"evaluations-module__QgHSaa__formRow",grid:"evaluations-module__QgHSaa__grid",gridContainer:"evaluations-module__QgHSaa__gridContainer",header:"evaluations-module__QgHSaa__header",loader:"evaluations-module__QgHSaa__loader",loading:"evaluations-module__QgHSaa__loading",modal:"evaluations-module__QgHSaa__modal",modalActions:"evaluations-module__QgHSaa__modalActions",modalForm:"evaluations-module__QgHSaa__modalForm",modalHeader:"evaluations-module__QgHSaa__modalHeader",modalOverlay:"evaluations-module__QgHSaa__modalOverlay",noteInput:"evaluations-module__QgHSaa__noteInput",overallPreview:"evaluations-module__QgHSaa__overallPreview",overallScore:"evaluations-module__QgHSaa__overallScore",pageBtn:"evaluations-module__QgHSaa__pageBtn",pageInfo:"evaluations-module__QgHSaa__pageInfo",pagination:"evaluations-module__QgHSaa__pagination",scoreBar:"evaluations-module__QgHSaa__scoreBar",scoreHigh:"evaluations-module__QgHSaa__scoreHigh",scoreInput:"evaluations-module__QgHSaa__scoreInput",scoreInputWithNote:"evaluations-module__QgHSaa__scoreInputWithNote",scoreInputs:"evaluations-module__QgHSaa__scoreInputs",scoreItem:"evaluations-module__QgHSaa__scoreItem",scoreLabel:"evaluations-module__QgHSaa__scoreLabel",scoreLow:"evaluations-module__QgHSaa__scoreLow",scoreMedium:"evaluations-module__QgHSaa__scoreMedium",scoreProgress:"evaluations-module__QgHSaa__scoreProgress",scoreValue:"evaluations-module__QgHSaa__scoreValue",scores:"evaluations-module__QgHSaa__scores",sectionTitle:"evaluations-module__QgHSaa__sectionTitle",spin:"evaluations-module__QgHSaa__spin",submitBtn:"evaluations-module__QgHSaa__submitBtn",subtitle:"evaluations-module__QgHSaa__subtitle",teacherId:"evaluations-module__QgHSaa__teacherId",teacherInfo:"evaluations-module__QgHSaa__teacherInfo",teacherName:"evaluations-module__QgHSaa__teacherName",title:"evaluations-module__QgHSaa__title"})},1619,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(21374),e=a.i(15618),f=a.i(69012),g=a.i(41675),h=a.i(50522),i=a.i(13749),j=a.i(33508),k=a.i(46842),l=a.i(51300);function m(){let[a,j]=(0,c.useState)([]),[m,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(1),[v,w]=(0,c.useState)(1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),B=async()=>{try{let a=await fetch("/api/auth/session"),b=await a.json();b.authenticated&&A(b.user)}catch(a){console.error("Failed to fetch user:",a)}},C=(0,c.useCallback)(async()=>{q(!0);try{let a=new URLSearchParams({page:t.toString(),limit:"15"});r&&a.set("teacherId",r);let b=await fetch(`/api/evaluations?${a}`),c=await b.json();j(c.evaluations),w(c.pagination.totalPages)}catch(a){console.error("Failed to fetch evaluations:",a)}finally{q(!1)}},[t,r]),D=async()=>{try{let a=await fetch("/api/teachers?limit=100&status=active"),b=await a.json();o(b.teachers||[])}catch(a){console.error("Failed to fetch teachers:",a)}};(0,c.useEffect)(()=>{C()},[C]),(0,c.useEffect)(()=>{D(),B()},[]);let E=z?.role==="teacher";return(0,b.jsxs)("div",{className:l.default.container,children:[(0,b.jsxs)("div",{className:l.default.header,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:l.default.title,children:E?"تقييماتي":"تقييمات الأداء"}),(0,b.jsx)("p",{className:l.default.subtitle,children:E?"سجل تقييمات أدائك وتطورك المهني":"تقييم ومتابعة أداء المدرسين"})]}),!E&&(0,b.jsxs)("button",{className:l.default.addButton,onClick:()=>y(!0),children:[(0,b.jsx)(e.Plus,{size:18}),"تقييم جديد"]})]}),!E&&(0,b.jsx)("div",{className:l.default.filters,children:(0,b.jsxs)("div",{className:l.default.filterGroup,children:[(0,b.jsx)(f.Filter,{size:18}),(0,b.jsxs)("select",{value:r,onChange:a=>{s(a.target.value),u(1)},className:l.default.filterSelect,children:[(0,b.jsx)("option",{value:"",children:"جميع المدرسين"}),m.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]})}),(0,b.jsxs)("div",{className:l.default.gridContainer,children:[p?(0,b.jsxs)("div",{className:l.default.loading,children:[(0,b.jsx)("div",{className:l.default.loader}),(0,b.jsx)("p",{children:"جاري التحميل..."})]}):0===a.length?(0,b.jsxs)("div",{className:l.default.empty,children:[(0,b.jsx)(d.Star,{size:48}),(0,b.jsx)("h3",{children:"لا توجد تقييمات"}),(0,b.jsx)("p",{children:"لم يتم إضافة تقييمات بعد"})]}):(0,b.jsx)("div",{className:l.default.grid,children:a.map(a=>{var c,e;return(0,b.jsxs)("div",{className:l.default.card,children:[(0,b.jsxs)("div",{className:l.default.cardHeader,children:[(0,b.jsxs)("div",{className:l.default.teacherInfo,children:[(0,b.jsx)("div",{className:l.default.avatar,children:a.teacher.name.charAt(0)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:l.default.teacherName,children:a.teacher.name}),(0,b.jsx)("p",{className:l.default.teacherId,children:a.teacher.employeeId})]})]}),(0,b.jsxs)("div",{className:`${l.default.overallScore} ${(c=a.overallScore)>=8?l.default.scoreHigh:c>=6?l.default.scoreMedium:l.default.scoreLow}`,children:[(0,b.jsx)(d.Star,{size:18}),(0,b.jsx)("span",{children:a.overallScore.toFixed(1)}),(0,b.jsx)("small",{children:(e=a.overallScore)>=9?"ممتاز":e>=8?"جيد جداً":e>=7?"جيد":e>=6?"مقبول":"ضعيف"})]})]}),(0,b.jsxs)("div",{className:l.default.scores,children:[(0,b.jsxs)("div",{className:l.default.scoreItem,children:[(0,b.jsx)("span",{className:l.default.scoreLabel,children:"التخطيط والإعداد للدرس"}),(0,b.jsx)("div",{className:l.default.scoreBar,children:(0,b.jsx)("div",{className:l.default.scoreProgress,style:{width:`${10*(a.lessonPlanning||0)}%`}})}),(0,b.jsxs)("span",{className:l.default.scoreValue,children:[a.lessonPlanning||0,"/10"]})]}),(0,b.jsxs)("div",{className:l.default.scoreItem,children:[(0,b.jsx)("span",{className:l.default.scoreLabel,children:"تنفيذ الدرس والتدريس"}),(0,b.jsx)("div",{className:l.default.scoreBar,children:(0,b.jsx)("div",{className:l.default.scoreProgress,style:{width:`${10*(a.lessonExecution||0)}%`}})}),(0,b.jsxs)("span",{className:l.default.scoreValue,children:[a.lessonExecution||0,"/10"]})]}),(0,b.jsxs)("div",{className:l.default.scoreItem,children:[(0,b.jsx)("span",{className:l.default.scoreLabel,children:"إدارة الصف والبيئة التعليمية"}),(0,b.jsx)("div",{className:l.default.scoreBar,children:(0,b.jsx)("div",{className:l.default.scoreProgress,style:{width:`${10*(a.classroomManagement||0)}%`}})}),(0,b.jsxs)("span",{className:l.default.scoreValue,children:[a.classroomManagement||0,"/10"]})]}),(0,b.jsxs)("div",{className:l.default.scoreItem,children:[(0,b.jsx)("span",{className:l.default.scoreLabel,children:"النمو المهني والمهنية"}),(0,b.jsx)("div",{className:l.default.scoreBar,children:(0,b.jsx)("div",{className:l.default.scoreProgress,style:{width:`${10*(a.professionalGrowth||0)}%`}})}),(0,b.jsxs)("span",{className:l.default.scoreValue,children:[a.professionalGrowth||0,"/10"]})]})]}),a.comments&&(0,b.jsx)("div",{className:l.default.comments,children:(0,b.jsx)("p",{children:a.comments})}),(0,b.jsxs)("div",{className:l.default.cardFooter,children:[(0,b.jsxs)("span",{className:l.default.date,children:[(0,b.jsx)(g.Calendar,{size:14}),new Date(a.date).toLocaleDateString("ar-SA")]}),(0,b.jsxs)("span",{className:l.default.evaluator,children:[(0,b.jsx)(k.User,{size:14}),a.evaluator.name]})]})]},a.id)})}),v>1&&(0,b.jsxs)("div",{className:l.default.pagination,children:[(0,b.jsxs)("button",{className:l.default.pageBtn,disabled:1===t,onClick:()=>u(a=>a-1),children:[(0,b.jsx)(h.ChevronRight,{size:18}),"السابق"]}),(0,b.jsxs)("span",{className:l.default.pageInfo,children:["صفحة ",t," من ",v]}),(0,b.jsxs)("button",{className:l.default.pageBtn,disabled:t===v,onClick:()=>u(a=>a+1),children:["التالي",(0,b.jsx)(i.ChevronLeft,{size:18})]})]})]}),x&&(0,b.jsx)(n,{teachers:m,onClose:()=>y(!1),onSave:()=>{y(!1),C()}})]})}function n({teachers:a,onClose:d,onSave:e}){let[f,g]=(0,c.useState)({teacherId:"",date:new Date().toISOString().split("T")[0],teachingQuality:7,punctuality:7,studentInteraction:7,curriculumAdherence:7,lessonPlanning:7,lessonExecution:7,classroomManagement:7,professionalGrowth:7,lessonPlanningNote:"",lessonExecutionNote:"",classroomManagementNote:"",professionalGrowthNote:"",comments:""}),[h,i]=(0,c.useState)(!1),[k,m]=(0,c.useState)(""),n=async a=>{if(a.preventDefault(),!f.teacherId)return void m("يرجى اختيار المدرس");i(!0),m("");try{let a=await fetch("/api/evaluations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),b=await a.json();if(!a.ok)return void m(b.error||"حدث خطأ");e()}catch{m("حدث خطأ في الاتصال")}finally{i(!1)}},o=(f.teachingQuality+f.punctuality+f.studentInteraction+f.curriculumAdherence)/4,p=(f.lessonPlanning+f.lessonExecution+f.classroomManagement+f.professionalGrowth)/4;return(0,b.jsx)("div",{className:l.default.modalOverlay,onClick:d,children:(0,b.jsxs)("div",{className:l.default.modal,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:l.default.modalHeader,children:[(0,b.jsx)("h2",{children:"تقييم جديد"}),(0,b.jsx)("button",{className:l.default.closeModal,onClick:d,children:(0,b.jsx)(j.X,{size:20})})]}),(0,b.jsxs)("form",{onSubmit:n,className:l.default.modalForm,children:[(0,b.jsxs)("div",{className:l.default.formRow,children:[(0,b.jsxs)("div",{className:l.default.formGroup,children:[(0,b.jsx)("label",{children:"المدرس *"}),(0,b.jsxs)("select",{value:f.teacherId,onChange:a=>g({...f,teacherId:a.target.value}),required:!0,children:[(0,b.jsx)("option",{value:"",children:"اختر المدرس"}),a.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:l.default.formGroup,children:[(0,b.jsx)("label",{children:"التاريخ *"}),(0,b.jsx)("input",{type:"date",value:f.date,onChange:a=>g({...f,date:a.target.value}),required:!0})]})]}),(0,b.jsx)("h3",{className:l.default.sectionTitle,children:"معايير الأداء الأساسية"}),(0,b.jsxs)("div",{className:l.default.scoreInputs,children:[(0,b.jsxs)("div",{className:l.default.scoreInput,children:[(0,b.jsx)("label",{children:"جودة التدريس"}),(0,b.jsx)("input",{type:"range",min:"1",max:"10",value:f.teachingQuality,onChange:a=>g({...f,teachingQuality:parseInt(a.target.value)})}),(0,b.jsxs)("span",{children:[f.teachingQuality,"/10"]})]}),(0,b.jsxs)("div",{className:l.default.scoreInput,children:[(0,b.jsx)("label",{children:"الالتزام بالمواعيد"}),(0,b.jsx)("input",{type:"range",min:"1",max:"10",value:f.punctuality,onChange:a=>g({...f,punctuality:parseInt(a.target.value)})}),(0,b.jsxs)("span",{children:[f.punctuality,"/10"]})]}),(0,b.jsxs)("div",{className:l.default.scoreInput,children:[(0,b.jsx)("label",{children:"التفاعل مع الطلاب"}),(0,b.jsx)("input",{type:"range",min:"1",max:"10",value:f.studentInteraction,onChange:a=>g({...f,studentInteraction:parseInt(a.target.value)})}),(0,b.jsxs)("span",{children:[f.studentInteraction,"/10"]})]}),(0,b.jsxs)("div",{className:l.default.scoreInput,children:[(0,b.jsx)("label",{children:"الالتزام بالمنهج"}),(0,b.jsx)("input",{type:"range",min:"1",max:"10",value:f.curriculumAdherence,onChange:a=>g({...f,curriculumAdherence:parseInt(a.target.value)})}),(0,b.jsxs)("span",{children:[f.curriculumAdherence,"/10"]})]})]}),(0,b.jsx)("h3",{className:l.default.sectionTitle,children:"معايير التقييم التفصيلية"}),(0,b.jsxs)("div",{className:l.default.scoreInputs,children:[(0,b.jsxs)("div",{className:l.default.scoreInputWithNote,children:[(0,b.jsxs)("div",{className:l.default.scoreInput,children:[(0,b.jsx)("label",{children:"التخطيط والإعداد للدرس"}),(0,b.jsx)("input",{type:"range",min:"1",max:"10",value:f.lessonPlanning,onChange:a=>g({...f,lessonPlanning:parseInt(a.target.value)})}),(0,b.jsxs)("span",{children:[f.lessonPlanning,"/10"]})]}),(0,b.jsx)("input",{type:"text",className:l.default.noteInput,placeholder:"ملاحظة على التخطيط...",value:f.lessonPlanningNote,onChange:a=>g({...f,lessonPlanningNote:a.target.value})})]}),(0,b.jsxs)("div",{className:l.default.scoreInputWithNote,children:[(0,b.jsxs)("div",{className:l.default.scoreInput,children:[(0,b.jsx)("label",{children:"تنفيذ الدرس والتدريس"}),(0,b.jsx)("input",{type:"range",min:"1",max:"10",value:f.lessonExecution,onChange:a=>g({...f,lessonExecution:parseInt(a.target.value)})}),(0,b.jsxs)("span",{children:[f.lessonExecution,"/10"]})]}),(0,b.jsx)("input",{type:"text",className:l.default.noteInput,placeholder:"ملاحظة على التنفيذ...",value:f.lessonExecutionNote,onChange:a=>g({...f,lessonExecutionNote:a.target.value})})]}),(0,b.jsxs)("div",{className:l.default.scoreInputWithNote,children:[(0,b.jsxs)("div",{className:l.default.scoreInput,children:[(0,b.jsx)("label",{children:"إدارة الصف والبيئة التعليمية"}),(0,b.jsx)("input",{type:"range",min:"1",max:"10",value:f.classroomManagement,onChange:a=>g({...f,classroomManagement:parseInt(a.target.value)})}),(0,b.jsxs)("span",{children:[f.classroomManagement,"/10"]})]}),(0,b.jsx)("input",{type:"text",className:l.default.noteInput,placeholder:"ملاحظة على الإدارة...",value:f.classroomManagementNote,onChange:a=>g({...f,classroomManagementNote:a.target.value})})]}),(0,b.jsxs)("div",{className:l.default.scoreInputWithNote,children:[(0,b.jsxs)("div",{className:l.default.scoreInput,children:[(0,b.jsx)("label",{children:"النمو المهني والمهنية"}),(0,b.jsx)("input",{type:"range",min:"1",max:"10",value:f.professionalGrowth,onChange:a=>g({...f,professionalGrowth:parseInt(a.target.value)})}),(0,b.jsxs)("span",{children:[f.professionalGrowth,"/10"]})]}),(0,b.jsx)("input",{type:"text",className:l.default.noteInput,placeholder:"ملاحظة على النمو المهني...",value:f.professionalGrowthNote,onChange:a=>g({...f,professionalGrowthNote:a.target.value})})]})]}),(0,b.jsxs)("div",{className:l.default.overallPreview,children:[(0,b.jsx)("span",{children:"المتوسط العام:"}),(0,b.jsx)("strong",{children:((o+p)/2).toFixed(1)})]}),(0,b.jsxs)("div",{className:l.default.formGroup,children:[(0,b.jsx)("label",{children:"ملاحظات عامة"}),(0,b.jsx)("textarea",{value:f.comments,onChange:a=>g({...f,comments:a.target.value}),rows:3,placeholder:"أضف ملاحظاتك العامة هنا..."})]}),k&&(0,b.jsx)("div",{className:l.default.formError,children:k}),(0,b.jsxs)("div",{className:l.default.modalActions,children:[(0,b.jsx)("button",{type:"button",className:l.default.cancelBtn,onClick:d,children:"إلغاء"}),(0,b.jsx)("button",{type:"submit",className:l.default.submitBtn,disabled:h,children:h?"جاري الحفظ...":"حفظ التقييم"})]})]})]})})}a.s(["default",()=>m])}];

//# sourceMappingURL=src_app_dashboard_evaluations_c1560f40._.js.map