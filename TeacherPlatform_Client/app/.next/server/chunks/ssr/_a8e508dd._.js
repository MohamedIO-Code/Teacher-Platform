module.exports=[46864,a=>{"use strict";let b=(0,a.i(70106).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["UserCheck",()=>b],46864)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},50522,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["ChevronRight",()=>b],50522)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},87532,24569,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>c],87532);let d=(0,b.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>d],24569)},26578,a=>{a.v({actions:"parents-module__iuI-8a__actions",addButton:"parents-module__iuI-8a__addButton",avatar:"parents-module__iuI-8a__avatar",cancelBtn:"parents-module__iuI-8a__cancelBtn",card:"parents-module__iuI-8a__card",cardHeader:"parents-module__iuI-8a__cardHeader",container:"parents-module__iuI-8a__container",deleteBtn:"parents-module__iuI-8a__deleteBtn",editBtn:"parents-module__iuI-8a__editBtn",empty:"parents-module__iuI-8a__empty",filters:"parents-module__iuI-8a__filters",formError:"parents-module__iuI-8a__formError",formGroup:"parents-module__iuI-8a__formGroup",grid:"parents-module__iuI-8a__grid",header:"parents-module__iuI-8a__header",headerContent:"parents-module__iuI-8a__headerContent",headerIcon:"parents-module__iuI-8a__headerIcon",info:"parents-module__iuI-8a__info",listContainer:"parents-module__iuI-8a__listContainer",loader:"parents-module__iuI-8a__loader",loading:"parents-module__iuI-8a__loading",modal:"parents-module__iuI-8a__modal",modalActions:"parents-module__iuI-8a__modalActions",modalForm:"parents-module__iuI-8a__modalForm",modalHeader:"parents-module__iuI-8a__modalHeader",modalOverlay:"parents-module__iuI-8a__modalOverlay",noStudents:"parents-module__iuI-8a__noStudents",pagination:"parents-module__iuI-8a__pagination",searchGroup:"parents-module__iuI-8a__searchGroup",spin:"parents-module__iuI-8a__spin",studentGrade:"parents-module__iuI-8a__studentGrade",studentItem:"parents-module__iuI-8a__studentItem",studentName:"parents-module__iuI-8a__studentName",studentsHeader:"parents-module__iuI-8a__studentsHeader",studentsList:"parents-module__iuI-8a__studentsList",studentsSection:"parents-module__iuI-8a__studentsSection",submitBtn:"parents-module__iuI-8a__submitBtn",subtitle:"parents-module__iuI-8a__subtitle",title:"parents-module__iuI-8a__title"})},37533,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46864),e=a.i(15618),f=a.i(87532),g=a.i(50522),h=a.i(13749),i=a.i(33508),j=a.i(24569),k=a.i(81560),l=a.i(60246),m=a.i(26578);function n(){let[a,i]=(0,c.useState)([]),[n,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(1),[u,v]=(0,c.useState)(1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),A=(0,c.useCallback)(async()=>{p(!0);try{let a=new URLSearchParams({page:s.toString(),limit:"15"});q&&a.set("search",q);let b=await fetch(`/api/parents?${a}`),c=await b.json();i(c.parents||[]),v(c.pagination?.totalPages||1)}catch(a){console.error("Failed to fetch parents:",a)}finally{p(!1)}},[s,q]);(0,c.useEffect)(()=>{A()},[A]);let B=async a=>{if(confirm("هل أنت متأكد من حذف ولي الأمر هذا؟"))try{await fetch(`/api/parents/${a}`,{method:"DELETE"}),A()}catch(a){console.error("Failed to delete parent:",a)}};return(0,b.jsxs)("div",{className:m.default.container,children:[(0,b.jsxs)("div",{className:m.default.header,children:[(0,b.jsxs)("div",{className:m.default.headerContent,children:[(0,b.jsx)("div",{className:m.default.headerIcon,children:(0,b.jsx)(d.UserCheck,{size:28})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:m.default.title,children:"أولياء الأمور"}),(0,b.jsx)("p",{className:m.default.subtitle,children:"إدارة حسابات أولياء الأمور"})]})]}),(0,b.jsxs)("button",{className:m.default.addButton,onClick:()=>{z(null),x(!0)},children:[(0,b.jsx)(e.Plus,{size:18}),"إضافة ولي أمر"]})]}),(0,b.jsx)("div",{className:m.default.filters,children:(0,b.jsxs)("div",{className:m.default.searchGroup,children:[(0,b.jsx)(f.Search,{size:18}),(0,b.jsx)("input",{type:"text",placeholder:"بحث بالاسم أو البريد الإلكتروني...",value:q,onChange:a=>{r(a.target.value),t(1)}})]})}),(0,b.jsxs)("div",{className:m.default.listContainer,children:[n?(0,b.jsxs)("div",{className:m.default.loading,children:[(0,b.jsx)("div",{className:m.default.loader}),(0,b.jsx)("p",{children:"جاري التحميل..."})]}):0===a.length?(0,b.jsxs)("div",{className:m.default.empty,children:[(0,b.jsx)(d.UserCheck,{size:48}),(0,b.jsx)("h3",{children:"لا يوجد أولياء أمور"}),(0,b.jsx)("p",{children:"لم يتم إضافة أولياء أمور بعد"})]}):(0,b.jsx)("div",{className:m.default.grid,children:a.map(a=>(0,b.jsxs)("div",{className:m.default.card,children:[(0,b.jsxs)("div",{className:m.default.cardHeader,children:[(0,b.jsx)("div",{className:m.default.avatar,children:a.name.charAt(0)}),(0,b.jsxs)("div",{className:m.default.info,children:[(0,b.jsx)("h3",{children:a.name}),(0,b.jsx)("p",{children:a.email}),a.phone&&(0,b.jsx)("span",{children:a.phone})]}),(0,b.jsxs)("div",{className:m.default.actions,children:[(0,b.jsx)("button",{className:m.default.editBtn,onClick:()=>{z(a),x(!0)},children:(0,b.jsx)(j.Edit,{size:16})}),(0,b.jsx)("button",{className:m.default.deleteBtn,onClick:()=>B(a.id),children:(0,b.jsx)(k.Trash2,{size:16})})]})]}),(0,b.jsxs)("div",{className:m.default.studentsSection,children:[(0,b.jsxs)("div",{className:m.default.studentsHeader,children:[(0,b.jsx)(l.Users,{size:16}),(0,b.jsxs)("span",{children:["الأبناء (",a.students.length,")"]})]}),0===a.students.length?(0,b.jsx)("p",{className:m.default.noStudents,children:"لا يوجد أبناء مسجلين"}):(0,b.jsx)("div",{className:m.default.studentsList,children:a.students.map(a=>(0,b.jsxs)("div",{className:m.default.studentItem,children:[(0,b.jsx)("span",{className:m.default.studentName,children:a.name}),(0,b.jsx)("span",{className:m.default.studentGrade,children:a.grade||a.studentId})]},a.id))})]})]},a.id))}),u>1&&(0,b.jsxs)("div",{className:m.default.pagination,children:[(0,b.jsxs)("button",{disabled:1===s,onClick:()=>t(a=>a-1),children:[(0,b.jsx)(g.ChevronRight,{size:18}),"السابق"]}),(0,b.jsxs)("span",{children:["صفحة ",s," من ",u]}),(0,b.jsxs)("button",{disabled:s===u,onClick:()=>t(a=>a+1),children:["التالي",(0,b.jsx)(h.ChevronLeft,{size:18})]})]})]}),w&&(0,b.jsx)(o,{parent:y,onClose:()=>{x(!1),z(null)},onSave:()=>{x(!1),z(null),A()}})]})}function o({parent:a,onClose:d,onSave:e}){let[f,g]=(0,c.useState)({name:a?.name||"",email:a?.email||"",phone:a?.phone||"",password:""}),[h,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(""),n=async b=>{if(b.preventDefault(),!f.name||!f.email)return void l("الاسم والبريد الإلكتروني مطلوبان");if(!a&&!f.password)return void l("كلمة المرور مطلوبة للحسابات الجديدة");j(!0),l("");try{let b={...f};!f.password&&a&&delete b.password;let c=await fetch(a?`/api/parents/${a.id}`:"/api/parents",{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json();if(!c.ok)return void l(d.error||"حدث خطأ");e()}catch{l("حدث خطأ في الاتصال")}finally{j(!1)}};return(0,b.jsx)("div",{className:m.default.modalOverlay,onClick:d,children:(0,b.jsxs)("div",{className:m.default.modal,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:m.default.modalHeader,children:[(0,b.jsx)("h2",{children:a?"تعديل ولي الأمر":"إضافة ولي أمر جديد"}),(0,b.jsx)("button",{onClick:d,children:(0,b.jsx)(i.X,{size:20})})]}),(0,b.jsxs)("form",{onSubmit:n,className:m.default.modalForm,children:[(0,b.jsxs)("div",{className:m.default.formGroup,children:[(0,b.jsx)("label",{children:"الاسم الكامل *"}),(0,b.jsx)("input",{type:"text",value:f.name,onChange:a=>g({...f,name:a.target.value}),placeholder:"أدخل اسم ولي الأمر",required:!0})]}),(0,b.jsxs)("div",{className:m.default.formGroup,children:[(0,b.jsx)("label",{children:"البريد الإلكتروني *"}),(0,b.jsx)("input",{type:"email",value:f.email,onChange:a=>g({...f,email:a.target.value}),placeholder:"البريد الإلكتروني",required:!0,disabled:!!a})]}),(0,b.jsxs)("div",{className:m.default.formGroup,children:[(0,b.jsx)("label",{children:"رقم الهاتف"}),(0,b.jsx)("input",{type:"tel",value:f.phone,onChange:a=>g({...f,phone:a.target.value}),placeholder:"رقم الهاتف"})]}),(0,b.jsxs)("div",{className:m.default.formGroup,children:[(0,b.jsx)("label",{children:a?"كلمة المرور (اتركها فارغة للإبقاء)":"كلمة المرور *"}),(0,b.jsx)("input",{type:"password",value:f.password,onChange:a=>g({...f,password:a.target.value}),placeholder:"كلمة المرور",required:!a})]}),k&&(0,b.jsx)("div",{className:m.default.formError,children:k}),(0,b.jsxs)("div",{className:m.default.modalActions,children:[(0,b.jsx)("button",{type:"button",onClick:d,className:m.default.cancelBtn,children:"إلغاء"}),(0,b.jsx)("button",{type:"submit",className:m.default.submitBtn,disabled:h,children:h?"جاري الحفظ...":"حفظ"})]})]})]})})}a.s(["default",()=>n])}];

//# sourceMappingURL=_a8e508dd._.js.map