module.exports=[12412,a=>{a.v({actionBtn:"teachers-module__Nflfdq__actionBtn",actionDropdown:"teachers-module__Nflfdq__actionDropdown",actions:"teachers-module__Nflfdq__actions",addButton:"teachers-module__Nflfdq__addButton",avatar:"teachers-module__Nflfdq__avatar",badge:"teachers-module__Nflfdq__badge",badgeError:"teachers-module__Nflfdq__badgeError",badgeGray:"teachers-module__Nflfdq__badgeGray",badgeSuccess:"teachers-module__Nflfdq__badgeSuccess",cancelBtn:"teachers-module__Nflfdq__cancelBtn",clearSearch:"teachers-module__Nflfdq__clearSearch",closeModal:"teachers-module__Nflfdq__closeModal",container:"teachers-module__Nflfdq__container",dropdownItem:"teachers-module__Nflfdq__dropdownItem",dropdownMenu:"teachers-module__Nflfdq__dropdownMenu",empty:"teachers-module__Nflfdq__empty",fadeIn:"teachers-module__Nflfdq__fadeIn",filterGroup:"teachers-module__Nflfdq__filterGroup",filterSelect:"teachers-module__Nflfdq__filterSelect",filters:"teachers-module__Nflfdq__filters",formError:"teachers-module__Nflfdq__formError",formGrid:"teachers-module__Nflfdq__formGrid",formGroup:"teachers-module__Nflfdq__formGroup",header:"teachers-module__Nflfdq__header",loader:"teachers-module__Nflfdq__loader",loading:"teachers-module__Nflfdq__loading",modal:"teachers-module__Nflfdq__modal",modalActions:"teachers-module__Nflfdq__modalActions",modalForm:"teachers-module__Nflfdq__modalForm",modalHeader:"teachers-module__Nflfdq__modalHeader",modalOverlay:"teachers-module__Nflfdq__modalOverlay",noScore:"teachers-module__Nflfdq__noScore",pageBtn:"teachers-module__Nflfdq__pageBtn",pageInfo:"teachers-module__Nflfdq__pageInfo",pagination:"teachers-module__Nflfdq__pagination",score:"teachers-module__Nflfdq__score",scoreHigh:"teachers-module__Nflfdq__scoreHigh",scoreLow:"teachers-module__Nflfdq__scoreLow",scoreMedium:"teachers-module__Nflfdq__scoreMedium",searchBox:"teachers-module__Nflfdq__searchBox",searchIcon:"teachers-module__Nflfdq__searchIcon",searchInput:"teachers-module__Nflfdq__searchInput",slideUp:"teachers-module__Nflfdq__slideUp",spin:"teachers-module__Nflfdq__spin",submitBtn:"teachers-module__Nflfdq__submitBtn",subtitle:"teachers-module__Nflfdq__subtitle",table:"teachers-module__Nflfdq__table",tableCard:"teachers-module__Nflfdq__tableCard",teacherId:"teachers-module__Nflfdq__teacherId",teacherInfo:"teachers-module__Nflfdq__teacherInfo",teacherName:"teachers-module__Nflfdq__teacherName",title:"teachers-module__Nflfdq__title"})},55562,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(87532),f=a.i(15618),g=a.i(69012),h=a.i(60246),i=a.i(21374),j=a.i(77156),k=a.i(24569);let l=(0,a.i(70106).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var m=a.i(50522),n=a.i(13749),o=a.i(33508),p=a.i(81560),q=a.i(12412);function r(){let[a,r]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(1),[J,K]=(0,c.useState)(1),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(null),P=(0,c.useCallback)(async()=>{y(!0);try{let a=new URLSearchParams({page:H.toString(),limit:"10"});B&&a.set("search",B),D&&a.set("status",D),F&&a.set("departmentId",F);let b=await fetch(`/api/teachers?${a}`),c=await b.json();r(c.teachers),K(c.pagination.totalPages)}catch(a){console.error("Failed to fetch teachers:",a)}finally{y(!1)}},[H,B,D,F]),Q=async()=>{try{let a=await fetch("/api/departments"),b=await a.json();u(b.departments||[])}catch(a){console.error("Failed to fetch departments:",a)}},R=async()=>{try{let a=await fetch("/api/subjects"),b=await a.json();w(b.subjects||[])}catch(a){console.error("Failed to fetch subjects:",a)}},S=async a=>{if(confirm("هل أنت متأكد من حذف هذا المدرس؟"))try{let b=await fetch(`/api/teachers/${a}`,{method:"DELETE"}),c=await b.json();b.ok?P():alert(c.error||"فشل في حذف المدرس"),A(null)}catch(a){console.error("Failed to delete teacher:",a),alert("حدث خطأ في الحذف"),A(null)}};return(0,c.useEffect)(()=>{P()},[P]),(0,c.useEffect)(()=>{Q(),R()},[]),(0,b.jsxs)("div",{className:q.default.container,children:[(0,b.jsxs)("div",{className:q.default.header,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:q.default.title,children:"إدارة المدرسون"}),(0,b.jsx)("p",{className:q.default.subtitle,children:"عرض وإدارة بيانات المدرسون في المنظومة"})]}),(0,b.jsxs)("button",{className:q.default.addButton,onClick:()=>{O(null),M(!0)},children:[(0,b.jsx)(f.Plus,{size:18}),"إضافة مدرس"]})]}),(0,b.jsxs)("div",{className:q.default.filters,children:[(0,b.jsxs)("div",{className:q.default.searchBox,children:[(0,b.jsx)(e.Search,{size:18,className:q.default.searchIcon}),(0,b.jsx)("input",{type:"text",placeholder:"بحث بالاسم أو الرقم الوظيفي...",value:B,onChange:a=>{C(a.target.value),I(1)},className:q.default.searchInput}),B&&(0,b.jsx)("button",{className:q.default.clearSearch,onClick:()=>C(""),children:(0,b.jsx)(o.X,{size:16})})]}),(0,b.jsxs)("div",{className:q.default.filterGroup,children:[(0,b.jsx)(g.Filter,{size:18}),(0,b.jsxs)("select",{value:D,onChange:a=>{E(a.target.value),I(1)},className:q.default.filterSelect,children:[(0,b.jsx)("option",{value:"",children:"جميع الحالات"}),(0,b.jsx)("option",{value:"active",children:"نشط"}),(0,b.jsx)("option",{value:"inactive",children:"غير نشط"}),(0,b.jsx)("option",{value:"suspended",children:"موقوف"})]}),(0,b.jsxs)("select",{value:F,onChange:a=>{G(a.target.value),I(1)},className:q.default.filterSelect,children:[(0,b.jsx)("option",{value:"",children:"جميع الأقسام"}),t.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]})]}),(0,b.jsx)("div",{className:q.default.tableCard,children:x?(0,b.jsxs)("div",{className:q.default.loading,children:[(0,b.jsx)("div",{className:q.default.loader}),(0,b.jsx)("p",{children:"جاري التحميل..."})]}):0===a.length?(0,b.jsxs)("div",{className:q.default.empty,children:[(0,b.jsx)(h.Users,{size:48}),(0,b.jsx)("h3",{children:"لا يوجد مدرسين"}),(0,b.jsx)("p",{children:"لم يتم العثور على مدرسين بناءً على معايير البحث"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("table",{className:q.default.table,children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"المدرس"}),(0,b.jsx)("th",{children:"القسم"}),(0,b.jsx)("th",{children:"المادة"}),(0,b.jsx)("th",{children:"التقييم"}),(0,b.jsx)("th",{children:"الحالة"}),(0,b.jsx)("th",{children:"الإجراءات"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>{var c,e;let f={active:{label:"نشط",class:"badgeSuccess"},inactive:{label:"غير نشط",class:"badgeGray"},suspended:{label:"موقوف",class:"badgeError"}}[c=a.status]||{label:c,class:"badgeGray"};return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:q.default.teacherInfo,children:[(0,b.jsx)("div",{className:q.default.avatar,children:a.name.charAt(0)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:q.default.teacherName,children:a.name}),(0,b.jsx)("p",{className:q.default.teacherId,children:a.employeeId})]})]})}),(0,b.jsx)("td",{children:a.department?.name||"-"}),(0,b.jsx)("td",{children:a.subject?.name||"-"}),(0,b.jsx)("td",{children:null!==a.avgScore?(0,b.jsxs)("div",{className:`${q.default.score} ${null===(e=a.avgScore)?"":e>=8?q.default.scoreHigh:e>=6?q.default.scoreMedium:q.default.scoreLow}`,children:[(0,b.jsx)(i.Star,{size:14}),a.avgScore]}):(0,b.jsx)("span",{className:q.default.noScore,children:"-"})}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:`${q.default.badge} ${q.default[f.class]}`,children:f.label})}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:q.default.actions,children:[(0,b.jsx)(d.default,{href:`/dashboard/teachers/${a.id}`,className:q.default.actionBtn,children:(0,b.jsx)(j.Eye,{size:16})}),(0,b.jsx)("button",{className:q.default.actionBtn,onClick:()=>{O(a),M(!0)},children:(0,b.jsx)(k.Edit,{size:16})}),(0,b.jsxs)("div",{className:q.default.actionDropdown,children:[(0,b.jsx)("button",{className:q.default.actionBtn,onClick:()=>A(z===a.id?null:a.id),children:(0,b.jsx)(l,{size:16})}),z===a.id&&(0,b.jsx)("div",{className:q.default.dropdownMenu,children:(0,b.jsxs)("button",{className:q.default.dropdownItem,onClick:()=>S(a.id),children:[(0,b.jsx)(p.Trash2,{size:14}),"حذف المدرس"]})})]})]})})]},a.id)})})]}),(0,b.jsxs)("div",{className:q.default.pagination,children:[(0,b.jsxs)("button",{className:q.default.pageBtn,disabled:1===H,onClick:()=>I(a=>a-1),children:[(0,b.jsx)(m.ChevronRight,{size:18}),"السابق"]}),(0,b.jsxs)("span",{className:q.default.pageInfo,children:["صفحة ",H," من ",J]}),(0,b.jsxs)("button",{className:q.default.pageBtn,disabled:H===J,onClick:()=>I(a=>a+1),children:["التالي",(0,b.jsx)(n.ChevronLeft,{size:18})]})]})]})}),L&&(0,b.jsx)(s,{teacher:N,departments:t,subjects:v,onClose:()=>M(!1),onSave:()=>{M(!1),P()}})]})}function s({teacher:a,departments:d,subjects:e,onClose:f,onSave:g}){let[h,i]=(0,c.useState)({employeeId:a?.employeeId||"",name:a?.name||"",email:a?.email||"",phone:a?.phone||"",departmentId:a?.department?.id?.toString()||"",subjectId:a?.subject?.id?.toString()||"",status:a?.status||"active"}),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),n=async b=>{b.preventDefault(),k(!0),m("");try{let b=a?`/api/teachers/${a.id}`:"/api/teachers",c=a?"PUT":"POST",d=await fetch(b,{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),e=await d.json();if(!d.ok)return void m(e.error||"حدث خطأ");g()}catch{m("حدث خطأ في الاتصال")}finally{k(!1)}};return(0,b.jsx)("div",{className:q.default.modalOverlay,onClick:f,children:(0,b.jsxs)("div",{className:q.default.modal,onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:q.default.modalHeader,children:[(0,b.jsx)("h2",{children:a?"تعديل بيانات المدرس":"إضافة مدرس جديد"}),(0,b.jsx)("button",{className:q.default.closeModal,onClick:f,children:(0,b.jsx)(o.X,{size:20})})]}),(0,b.jsxs)("form",{onSubmit:n,className:q.default.modalForm,children:[(0,b.jsxs)("div",{className:q.default.formGrid,children:[(0,b.jsxs)("div",{className:q.default.formGroup,children:[(0,b.jsx)("label",{children:"الرقم الوظيفي *"}),(0,b.jsx)("input",{type:"text",value:h.employeeId,onChange:a=>i({...h,employeeId:a.target.value}),required:!0,disabled:!!a})]}),(0,b.jsxs)("div",{className:q.default.formGroup,children:[(0,b.jsx)("label",{children:"الاسم الكامل *"}),(0,b.jsx)("input",{type:"text",value:h.name,onChange:a=>i({...h,name:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:q.default.formGroup,children:[(0,b.jsx)("label",{children:"البريد الإلكتروني"}),(0,b.jsx)("input",{type:"email",value:h.email,onChange:a=>i({...h,email:a.target.value})})]}),(0,b.jsxs)("div",{className:q.default.formGroup,children:[(0,b.jsx)("label",{children:"رقم الهاتف"}),(0,b.jsx)("input",{type:"tel",value:h.phone,onChange:a=>i({...h,phone:a.target.value})})]}),(0,b.jsxs)("div",{className:q.default.formGroup,children:[(0,b.jsx)("label",{children:"القسم"}),(0,b.jsxs)("select",{value:h.departmentId,onChange:a=>i({...h,departmentId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"اختر القسم"}),d.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:q.default.formGroup,children:[(0,b.jsx)("label",{children:"المادة"}),(0,b.jsxs)("select",{value:h.subjectId,onChange:a=>i({...h,subjectId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"اختر المادة"}),e.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:q.default.formGroup,children:[(0,b.jsx)("label",{children:"الحالة"}),(0,b.jsxs)("select",{value:h.status,onChange:a=>i({...h,status:a.target.value}),children:[(0,b.jsx)("option",{value:"active",children:"نشط"}),(0,b.jsx)("option",{value:"inactive",children:"غير نشط"}),(0,b.jsx)("option",{value:"suspended",children:"موقوف"})]})]})]}),l&&(0,b.jsx)("div",{className:q.default.formError,children:l}),(0,b.jsxs)("div",{className:q.default.modalActions,children:[(0,b.jsx)("button",{type:"button",className:q.default.cancelBtn,onClick:f,children:"إلغاء"}),(0,b.jsx)("button",{type:"submit",className:q.default.submitBtn,disabled:j,children:j?"جاري الحفظ...":a?"حفظ التعديلات":"إضافة المدرس"})]})]})]})})}a.s(["default",()=>r],55562)}];

//# sourceMappingURL=src_app_dashboard_teachers_45fb5e67._.js.map